(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2070],{2070:function(e){e.exports=function(){function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[a]={exports:{}};t[a][0].call(u.exports,(function(e){return r(t[a][1][e]||e)}),u,u.exports,e,t,i,n)}return i[a].exports}for(var s=void 0,a=0;a<n.length;a++)r(n[a]);return r}return e}()({1:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"===typeof e}function s(e){return"number"===typeof e}function a(e){return"object"===typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(o(i=this._events[e]))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(a(i))for(s=Array.prototype.slice.call(arguments,1),n=(u=i.slice()).length,l=0;l<n;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var i,n,s,o;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(i=this._events[e]).length,n=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(i)){for(o=s;o-- >0;)if(i[o]===t||i[o].listener&&i[o].listener===t){n=o;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,i){var n;n=function(){function e(){this.id=null,this.sequence=null,this.system=null,this.title=null,this.description=null,this.advertiser=null,this.pricing=null,this.survey=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions=[]}return e}(),t.exports=n},{}],3:[function(e,t,i){var n,r,s;r=e("./parser"),s=e("./util"),n=function(){function e(){}return e.cappingFreeLunch=0,e.cappingMinimumTimeInterval=0,e.options={withCredentials:!1,timeout:0},e.get=function(e,t,n){var s,a,o,l;if(a=+new Date,s=i.extend=function(e,t){var i,n;for(i in t)n=t[i],e[i]=n;return e},n||("function"===typeof t&&(n=t),o={}),o=s(this.options,t),this.totalCallsTimeout<a?(this.totalCalls=1,this.totalCallsTimeout=a+36e5):this.totalCalls++,!(this.cappingFreeLunch>=this.totalCalls)){if((l=a-this.lastSuccessfullAd)<0)this.lastSuccessfullAd=0;else if(l<this.cappingMinimumTimeInterval)return void n(null,new Error("VAST call canceled \u2013 ("+this.cappingMinimumTimeInterval+")ms minimum interval reached"));return r.parse(e,o,(function(e,t){return n(e,t)}))}n(null,new Error("VAST call canceled \u2013 FreeLunch capping not reached yet "+this.totalCalls+"/"+this.cappingFreeLunch))},function(){var t,i;i=s.storage,t=Object.defineProperty,["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach((function(n){t(e,n,{get:function(){return i.getItem(n)},set:function(e){return i.setItem(n,e)},configurable:!1,enumerable:!0})})),null==e.lastSuccessfullAd&&(e.lastSuccessfullAd=0),null==e.totalCalls&&(e.totalCalls=0),null==e.totalCallsTimeout&&(e.totalCallsTimeout=0)}(),e}(),t.exports=n},{"./parser":12,"./util":18}],4:[function(e,t,i){var n;n=function(){function e(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.altText=null,this.companionClickThroughURLTemplate=null,this.companionClickTrackingURLTemplates=[],this.trackingEvents={}}return e}(),t.exports=n},{}],5:[function(e,t,i){var n,r,s,a,o=function(e,t){for(var i in t)l.call(t,i)&&(e[i]=t[i]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;s=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[],this.videoCustomClickURLTemplates=[],this.adParameters=null,this.icons=[]}return o(t,e),t}(n=function(){function e(e){null==e&&(e={}),this.id=e.id||null,this.adId=e.adId||null,this.sequence=e.sequence||null,this.apiFramework=e.apiFramework||null,this.trackingEvents={}}return e}()),a=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="nonlinear",this.variations=[]}return o(t,e),t}(n),r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="companion",this.variations=[]}return o(t,e),t}(n),t.exports={VASTCreativeLinear:s,VASTCreativeNonLinear:a,VASTCreativeCompanion:r}},{}],6:[function(e,t,i){var n;n=function(){function e(){this.attributes={},this.children=[]}return e}(),t.exports=n},{}],7:[function(e,t,i){var n;n=function(){function e(){this.name=null,this.value=null,this.attributes={}}return e}(),t.exports=n},{}],8:[function(e,t,i){var n;n=function(){function e(){this.program=null,this.height=0,this.width=0,this.xPosition=0,this.yPosition=0,this.apiFramework=null,this.offset=null,this.duration=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.iconClickThroughURLTemplate=null,this.iconClickTrackingURLTemplates=[],this.iconViewTrackingURLTemplate=null}return e}(),t.exports=n},{}],9:[function(e,t,i){t.exports={client:e("./client"),tracker:e("./tracker"),parser:e("./parser"),util:e("./util")}},{"./client":3,"./parser":12,"./tracker":14,"./util":18}],10:[function(e,t,i){var n;n=function(){function e(){this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null}return e}(),t.exports=n},{}],11:[function(e,t,i){var n;n=function(){function e(){this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.scalable=!0,this.maintainAspectRatio=!0,this.minSuggestedDuration=0,this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null,this.nonlinearClickTrackingURLTemplates=[],this.adParameters=null}return e}(),t.exports=n},{}],12:[function(e,t,i){var n,r,s,a,o,l,u,h,c,p,d,m,f,g,v,T=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1};r=e("./urlhandler"),g=e("./response"),s=e("./ad"),a=e("./extension"),o=e("./extensionchild"),v=e("./util"),h=e("./creative").VASTCreativeLinear,u=e("./creative").VASTCreativeCompanion,c=e("./creative").VASTCreativeNonLinear,d=e("./mediafile"),p=e("./icon"),l=e("./companionad"),m=e("./nonlinear"),n=e("events").EventEmitter,f=function(){var e;function t(){}return e=[],t.addURLTemplateFilter=function(t){"function"===typeof t&&e.push(t)},t.removeURLTemplateFilter=function(){return e.pop()},t.countURLTemplateFilters=function(){return e.length},t.clearUrlTemplateFilters=function(){return e=[]},t.parse=function(e,t,i){return i||("function"===typeof t&&(i=t),t={}),this._parse(e,null,t,(function(e,t){return i(t,e)}))},t.load=function(e,t,i){return i||("function"===typeof t&&(i=t),t={}),this.parseXmlDocument(null,[],t,e,i)},t.vent=new n,t.track=function(e,t){return this.vent.emit("VAST-error",t),v.track(e,t)},t.on=function(e,t){return this.vent.on(e,t)},t.once=function(e,t){return this.vent.once(e,t)},t.off=function(e,t){return this.vent.removeListener(e,t)},t._parse=function(t,i,n,s){var a,o,l,u;for(s||("function"===typeof n&&(s=n),n={}),o=0,l=e.length;o<l;o++)a=e[o],t=a(t);return null==i&&(i=[]),i.push(t),r.get(t,n,(u=this,function(e,r){return null!=e?s(e):u.parseXmlDocument(t,i,n,r,s)}))},t.parseXmlDocument=function(e,i,n,r,s){var a,o,l,u,h,c,p,d,m,f,v,k,y,R,L;if(L=new g,null==(null!=r?r.documentElement:void 0)||"VAST"!==r.documentElement.nodeName)return s(new Error("Invalid VAST XMLDocument"));for(h=0,d=(y=r.documentElement.childNodes).length;h<d;h++)"Error"===(k=y[h]).nodeName&&L.errorURLTemplates.push(t.parseNodeText(k));for(l=[],c=0,m=(R=r.documentElement.childNodes).length;c<m;c++)"Ad"===(k=R[c]).nodeName&&l.push(k);for(p=0,f=l.length;p<f;p++)o=l[p],null!=(a=t.parseAdElement(o))?(null!=n.wrapperSequence&&null==a.sequence&&1===l.length&&(a.sequence=n.wrapperSequence,n.wrapperSequence=null),L.ads.push(a)):t.track(L.errorURLTemplates,{ERRORCODE:101});for(u=function(e,i){var n,r,o,l;if(null==e&&(e=null),null==i&&(i=!1),L){for(o=!0,n=0,r=(l=L.ads).length;n<r;n++){if(null!=(a=l[n]).nextWrapperURL)return;a.creatives.length>0&&(o=!1)}return o&&(i||t.track(L.errorURLTemplates,{ERRORCODE:303})),0===L.ads.length&&(L=null,e=new Error("No ads: no valid <inline> has been found")),s(e,L)}},v=L.ads.length;v--;)null!=(a=L.ads[v]).nextWrapperURL&&function(r){var s;i.length>(null!==n.wrapperLimit?n.wrapperLimit:9)||(s=r.nextWrapperURL,T.call(i,s)>=0)?(t.track(r.errorURLTemplates,{ERRORCODE:302}),L.ads.splice(L.ads.indexOf(r),1),u(new Error("Wrapper limit reached, as defined by the video player"))):(null!=e&&(r.nextWrapperURL=t.resolveVastAdTagURI(r.nextWrapperURL,e)),n.wrapperSequence=r.sequence,t._parse(r.nextWrapperURL,i,n,(function(e,i){var n,s,a,o,l,h;if(n=!1,null!=e)t.track(r.errorURLTemplates,{ERRORCODE:301}),L.ads.splice(L.ads.indexOf(r),1),n=!0;else if(null==i)t.track(r.errorURLTemplates,{ERRORCODE:303}),L.ads.splice(L.ads.indexOf(r),1),n=!0;else for(L.errorURLTemplates=L.errorURLTemplates.concat(i.errorURLTemplates),s=L.ads.indexOf(r),L.ads.splice(s,1),a=0,o=(l=i.ads).length;a<o;a++)h=l[a],t.mergeWrapperAdData(h,r),L.ads.splice(++s,0,h);return delete r.nextWrapperURL,u(e,n)})))}(a);return u()},t.resolveVastAdTagURI=function(e,t){return 0===e.indexOf("//")?""+location.protocol+e:-1===e.indexOf("://")?t.slice(0,t.lastIndexOf("/"))+"/"+e:e},t.mergeWrapperAdData=function(e,t){var i,n,r,s,a,o,l,u,h,c,p,d,m,f,g,v,T,k,y,R,L;for(e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),s=0,u=(d=e.creatives).length;s<u;s++)if(n=d[s],null!=(null!=(m=t.trackingEvents)?m[n.type]:void 0))for(r in f=t.trackingEvents[n.type])L=f[r],(i=n.trackingEvents)[r]||(i[r]=[]),n.trackingEvents[r]=n.trackingEvents[r].concat(L);if(null!=(g=t.videoClickTrackingURLTemplates)?g.length:void 0)for(a=0,h=(v=e.creatives).length;a<h;a++)"linear"===(n=v[a]).type&&(n.videoClickTrackingURLTemplates=n.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates));if(null!=(T=t.videoCustomClickURLTemplates)?T.length:void 0)for(o=0,c=(k=e.creatives).length;o<c;o++)"linear"===(n=k[o]).type&&(n.videoCustomClickURLTemplates=n.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates));if(null!=t.videoClickThroughURLTemplate){for(R=[],l=0,p=(y=e.creatives).length;l<p;l++)"linear"===(n=y[l]).type&&null==n.videoClickThroughURLTemplate?R.push(n.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate):R.push(void 0);return R}},t.childByName=function(e,t){var i,n,r,s;for(n=0,r=(s=e.childNodes).length;n<r;n++)if((i=s[n]).nodeName===t)return i},t.childsByName=function(e,t){var i,n,r,s,a;for(n=[],r=0,s=(a=e.childNodes).length;r<s;r++)(i=a[r]).nodeName===t&&n.push(i);return n},t.parseAdElement=function(e){var t,i,n,r,s;for(i=0,n=(r=e.childNodes).length;i<n;i++)if("Wrapper"===(s=(t=r[i]).nodeName)||"InLine"===s){if(this.copyNodeAttribute("id",e,t),this.copyNodeAttribute("sequence",e,t),"Wrapper"===t.nodeName)return this.parseWrapperElement(t);if("InLine"===t.nodeName)return this.parseInLineElement(t)}},t.parseWrapperElement=function(e){var t,i,n,r,s,a,o,l,u,h,c,p,d,m,f,g,v,T,k,y,R,L,C;for(t=this.parseInLineElement(e),null!=(C=this.childByName(e,"VASTAdTagURI"))?t.nextWrapperURL=this.parseNodeText(C):null!=(C=this.childByName(e,"VASTAdTagURL"))&&(t.nextWrapperURL=this.parseNodeText(this.childByName(C,"URL"))),s=0,h=(f=t.creatives).length;s<h;s++)if("linear"===(g=(L=f[s]).type)||"nonlinear"===g){if(null!=L.trackingEvents)for(r in t.trackingEvents||(t.trackingEvents={}),(i=t.trackingEvents)[m=L.type]||(i[m]={}),v=L.trackingEvents)for(R=v[r],(n=t.trackingEvents[L.type])[r]||(n[r]=[]),o=0,c=R.length;o<c;o++)y=R[o],t.trackingEvents[L.type][r].push(y);if(null!=L.videoClickTrackingURLTemplates)for(t.videoClickTrackingURLTemplates||(t.videoClickTrackingURLTemplates=[]),l=0,p=(T=L.videoClickTrackingURLTemplates).length;l<p;l++)a=T[l],t.videoClickTrackingURLTemplates.push(a);if(null!=L.videoClickThroughURLTemplate&&(t.videoClickThroughURLTemplate=L.videoClickThroughURLTemplate),null!=L.videoCustomClickURLTemplates)for(t.videoCustomClickURLTemplates||(t.videoCustomClickURLTemplates=[]),u=0,d=(k=L.videoCustomClickURLTemplates).length;u<d;u++)a=k[u],t.videoCustomClickURLTemplates.push(a)}if(null!=t.nextWrapperURL)return t},t.parseInLineElement=function(e){var t,i,n,r,a,o,l,u,h,c,p,d,m,f,g;for((t=new s).id=e.getAttribute("id")||null,t.sequence=e.getAttribute("sequence")||null,o=0,h=(m=e.childNodes).length;o<h;o++)switch((d=m[o]).nodeName){case"Error":t.errorURLTemplates.push(this.parseNodeText(d));break;case"Impression":t.impressionURLTemplates.push(this.parseNodeText(d));break;case"Creatives":for(l=0,c=(f=this.childsByName(d,"Creative")).length;l<c;l++)for(n={id:(r=f[l]).getAttribute("id")||null,adId:this.parseCreativeAdIdAttribute(r),sequence:r.getAttribute("sequence")||null,apiFramework:r.getAttribute("apiFramework")||null},u=0,p=(g=r.childNodes).length;u<p;u++)switch((a=g[u]).nodeName){case"Linear":(i=this.parseCreativeLinearElement(a,n))&&t.creatives.push(i);break;case"NonLinearAds":(i=this.parseNonLinear(a,n))&&t.creatives.push(i);break;case"CompanionAds":(i=this.parseCompanionAd(a,n))&&t.creatives.push(i)}break;case"Extensions":this.parseExtension(t.extensions,this.childsByName(d,"Extension"));break;case"AdSystem":t.system={value:this.parseNodeText(d),version:d.getAttribute("version")||null};break;case"AdTitle":t.title=this.parseNodeText(d);break;case"Description":t.description=this.parseNodeText(d);break;case"Advertiser":t.advertiser=this.parseNodeText(d);break;case"Pricing":t.pricing={value:this.parseNodeText(d),model:d.getAttribute("model")||null,currency:d.getAttribute("currency")||null};break;case"Survey":t.survey=this.parseNodeText(d)}return t},t.parseExtension=function(e,t){var i,n,r,s,l,u,h,c,p,d,m,f,g,v,T,k,y,R,L;for(R=[],h=0,m=t.length;h<m;h++){if(l=t[h],n=new a,l.attributes)for(c=0,f=(T=l.attributes).length;c<f;c++)u=T[c],n.attributes[u.nodeName]=u.nodeValue;for(p=0,g=(k=l.childNodes).length;p<g;p++)if(i=k[p],L=this.parseNodeText(i),"#comment"!==i.nodeName&&""!==L){if((r=new o).name=i.nodeName,r.value=L,i.attributes)for(d=0,v=(y=i.attributes).length;d<v;d++)s=y[d],r.attributes[s.nodeName]=s.nodeValue;n.children.push(r)}R.push(e.push(n))}return R},t.parseCreativeLinearElement=function(e,t){var i,n,r,s,a,o,l,u,c,m,f,g,v,T,k,y,R,L,C,N,x,A,U,w,b,E,_,I,D,B,S,O,F,M,P,H,V,q,W,X,Q,j,Y,G,$,z,J,K,Z,ee,te,ie,ne,re,se,ae,oe,le,ue;if((s=new h(t)).duration=this.parseDuration(this.parseNodeText(this.childByName(e,"Duration"))),-1===s.duration&&"Wrapper"!==e.parentNode.parentNode.parentNode.nodeName)return null;if(null==(re=e.getAttribute("skipoffset"))?s.skipDelay=null:"%"===re.charAt(re.length-1)?(q=parseInt(re,10),s.skipDelay=s.duration*(q/100)):s.skipDelay=this.parseDuration(re),null!=(ue=this.childByName(e,"VideoClicks"))){for(s.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(ue,"ClickThrough")),u=0,L=(Q=this.childsByName(ue,"ClickTracking")).length;u<L;u++)r=Q[u],s.videoClickTrackingURLTemplates.push(this.parseNodeText(r));for(k=0,C=(j=this.childsByName(ue,"CustomClick")).length;k<C;k++)a=j[k],s.videoCustomClickURLTemplates.push(this.parseNodeText(a))}for(null!=(i=this.childByName(e,"AdParameters"))&&(s.adParameters=this.parseNodeText(i)),y=0,x=(G=this.childsByName(e,"TrackingEvents")).length;y<x;y++)for(oe=G[y],R=0,A=($=this.childsByName(oe,"Tracking")).length;R<A;R++)if(o=(ae=$[R]).getAttribute("event"),le=this.parseNodeText(ae),null!=o&&null!=le){if("progress"===o){if(!(H=ae.getAttribute("offset")))continue;o="%"===H.charAt(H.length-1)?"progress-"+H:"progress-"+Math.round(this.parseDuration(H))}null==(n=s.trackingEvents)[o]&&(n[o]=[]),s.trackingEvents[o].push(le)}for(D=0,U=(z=this.childsByName(e,"MediaFiles")).length;D<U;D++)for(F=z[D],M=0,w=(J=this.childsByName(F,"MediaFile")).length;M<w;M++)O=J[M],(S=new d).id=O.getAttribute("id"),S.fileURL=this.parseNodeText(O),S.deliveryType=O.getAttribute("delivery"),S.codec=O.getAttribute("codec"),S.mimeType=O.getAttribute("type"),S.apiFramework=O.getAttribute("apiFramework"),S.bitrate=parseInt(O.getAttribute("bitrate")||0),S.minBitrate=parseInt(O.getAttribute("minBitrate")||0),S.maxBitrate=parseInt(O.getAttribute("maxBitrate")||0),S.width=parseInt(O.getAttribute("width")||0),S.height=parseInt(O.getAttribute("height")||0),(ne=O.getAttribute("scalable"))&&"string"===typeof ne&&("true"===(ne=ne.toLowerCase())?S.scalable=!0:"false"===ne&&(S.scalable=!1)),(B=O.getAttribute("maintainAspectRatio"))&&"string"===typeof B&&("true"===(B=B.toLowerCase())?S.maintainAspectRatio=!0:"false"===B&&(S.maintainAspectRatio=!1)),s.mediaFiles.push(S);if(null!=(v=this.childByName(e,"Icons")))for(P=0,b=(K=this.childsByName(v,"Icon")).length;P<b;P++){for(g=K[P],(c=new p).program=g.getAttribute("program"),c.height=parseInt(g.getAttribute("height")||0),c.width=parseInt(g.getAttribute("width")||0),c.xPosition=this.parseXPosition(g.getAttribute("xPosition")),c.yPosition=this.parseYPosition(g.getAttribute("yPosition")),c.apiFramework=g.getAttribute("apiFramework"),c.offset=this.parseDuration(g.getAttribute("offset")),c.duration=this.parseDuration(g.getAttribute("duration")),V=0,E=(Z=this.childsByName(g,"HTMLResource")).length;V<E;V++)l=Z[V],c.type=l.getAttribute("creativeType")||"text/html",c.htmlResource=this.parseNodeText(l);for(W=0,_=(ee=this.childsByName(g,"IFrameResource")).length;W<_;W++)T=ee[W],c.type=T.getAttribute("creativeType")||0,c.iframeResource=this.parseNodeText(T);for(X=0,I=(te=this.childsByName(g,"StaticResource")).length;X<I;X++)se=te[X],c.type=se.getAttribute("creativeType")||0,c.staticResource=this.parseNodeText(se);if(null!=(f=this.childByName(g,"IconClicks")))for(c.iconClickThroughURLTemplate=this.parseNodeText(this.childByName(f,"IconClickThrough")),ie=0,N=(Y=this.childsByName(f,"IconClickTracking")).length;ie<N;ie++)m=Y[ie],c.iconClickTrackingURLTemplates.push(this.parseNodeText(m));c.iconViewTrackingURLTemplate=this.parseNodeText(this.childByName(g,"IconViewTracking")),s.icons.push(c)}return s},t.parseNonLinear=function(e,t){var i,n,r,s,a,o,l,u,h,p,d,f,g,v,T,k,y,R,L,C,N,x,A,U,w,b,E,_,I,D,B,S,O,F;for(s=new c(t),l=0,f=(U=this.childsByName(e,"TrackingEvents")).length;l<f;l++)for(O=U[l],h=0,g=(w=this.childsByName(O,"Tracking")).length;h<g;h++)a=(S=w[h]).getAttribute("event"),F=this.parseNodeText(S),null!=a&&null!=F&&(null==(n=s.trackingEvents)[a]&&(n[a]=[]),s.trackingEvents[a].push(F));for(p=0,v=(b=this.childsByName(e,"NonLinear")).length;p<v;p++){for(x=b[p],(N=new m).id=x.getAttribute("id")||null,N.width=x.getAttribute("width"),N.height=x.getAttribute("height"),N.expandedWidth=x.getAttribute("expandedWidth"),N.expandedHeight=x.getAttribute("expandedHeight"),N.scalable=this.parseBoolean(x.getAttribute("scalable")),N.maintainAspectRatio=this.parseBoolean(x.getAttribute("maintainAspectRatio")),N.minSuggestedDuration=this.parseDuration(x.getAttribute("minSuggestedDuration")),N.apiFramework=x.getAttribute("apiFramework"),d=0,T=(E=this.childsByName(x,"HTMLResource")).length;d<T;d++)o=E[d],N.type=o.getAttribute("creativeType")||"text/html",N.htmlResource=this.parseNodeText(o);for(L=0,k=(_=this.childsByName(x,"IFrameResource")).length;L<k;L++)u=_[L],N.type=u.getAttribute("creativeType")||0,N.iframeResource=this.parseNodeText(u);for(C=0,y=(I=this.childsByName(x,"StaticResource")).length;C<y;C++)B=I[C],N.type=B.getAttribute("creativeType")||0,N.staticResource=this.parseNodeText(B);for(null!=(i=this.childByName(x,"AdParameters"))&&(N.adParameters=this.parseNodeText(i)),N.nonlinearClickThroughURLTemplate=this.parseNodeText(this.childByName(x,"NonLinearClickThrough")),A=0,R=(D=this.childsByName(x,"NonLinearClickTracking")).length;A<R;A++)r=D[A],N.nonlinearClickTrackingURLTemplates.push(this.parseNodeText(r));s.variations.push(N)}return s},t.parseCompanionAd=function(e,t){var i,n,r,s,a,o,h,c,p,d,m,f,g,v,T,k,y,R,L,C,N,x,A,U,w,b,E,_,I,D,B,S,O,F,M,P,H;for(o=new u(t),p=0,v=(b=this.childsByName(e,"Companion")).length;p<v;p++){for(a=b[p],(s=new l).id=a.getAttribute("id")||null,s.width=a.getAttribute("width"),s.height=a.getAttribute("height"),s.companionClickTrackingURLTemplates=[],m=0,T=(E=this.childsByName(a,"HTMLResource")).length;m<T;m++)c=E[m],s.type=c.getAttribute("creativeType")||"text/html",s.htmlResource=this.parseNodeText(c);for(f=0,k=(_=this.childsByName(a,"IFrameResource")).length;f<k;f++)d=_[f],s.type=d.getAttribute("creativeType")||0,s.iframeResource=this.parseNodeText(d);for(g=0,y=(I=this.childsByName(a,"StaticResource")).length;g<y;g++){for(F=I[g],s.type=F.getAttribute("creativeType")||0,x=0,R=(D=this.childsByName(a,"AltText")).length;x<R;x++)n=D[x],s.altText=this.parseNodeText(n);s.staticResource=this.parseNodeText(F)}for(A=0,L=(B=this.childsByName(a,"TrackingEvents")).length;A<L;A++)for(P=B[A],U=0,C=(S=this.childsByName(P,"Tracking")).length;U<C;U++)h=(M=S[U]).getAttribute("event"),H=this.parseNodeText(M),null!=h&&null!=H&&(null==(i=s.trackingEvents)[h]&&(i[h]=[]),s.trackingEvents[h].push(H));for(w=0,N=(O=this.childsByName(a,"CompanionClickTracking")).length;w<N;w++)r=O[w],s.companionClickTrackingURLTemplates.push(this.parseNodeText(r));s.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(a,"CompanionClickThrough")),s.companionClickTrackingURLTemplate=this.parseNodeText(this.childByName(a,"CompanionClickTracking")),o.variations.push(s)}return o},t.parseDuration=function(e){var t,i,n,r,s;return null==e?-1:v.isNumeric(e)?parseInt(e):3!==(t=e.split(":")).length?-1:(s=t[2].split("."),r=parseInt(s[0]),2===s.length&&(r+=parseFloat("0."+s[1])),n=parseInt(60*t[1]),i=parseInt(60*t[0]*60),isNaN(i)||isNaN(n)||isNaN(r)||n>3600||r>60?-1:i+n+r)},t.parseXPosition=function(e){return"left"===e||"right"===e?e:parseInt(e||0)},t.parseYPosition=function(e){return"top"===e||"bottom"===e?e:parseInt(e||0)},t.parseBoolean=function(e){return"true"===e||"TRUE"===e||"1"===e},t.parseNodeText=function(e){return e&&(e.textContent||e.text||"").trim()},t.copyNodeAttribute=function(e,t,i){var n;if(n=t.getAttribute(e))return i.setAttribute(e,n)},t.parseCreativeAdIdAttribute=function(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null},t}(),t.exports=f},{"./ad":2,"./companionad":4,"./creative":5,"./extension":6,"./extensionchild":7,"./icon":8,"./mediafile":10,"./nonlinear":11,"./response":13,"./urlhandler":15,"./util":18,events:1}],13:[function(e,t,i){var n;n=function(){function e(){this.ads=[],this.errorURLTemplates=[]}return e}(),t.exports=n},{}],14:[function(e,t,i){var n,r,s,a,o,l,u=function(e,t){for(var i in t)h.call(t,i)&&(e[i]=t[i]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;n=e("./client"),l=e("./util"),s=e("./creative").VASTCreativeLinear,a=e("./nonlinear"),r=e("./companionad"),o=function(e){function t(e,t,i){var o,l,u;for(o in this.ad=e,this.creative=t,this.variation=null!=i?i:null,this.muted=!1,this.impressed=!1,this.skipable=!1,this.skipDelayDefault=-1,this.trackingEvents={},this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],this._alreadyTriggeredQuartiles={},u=this.creative.trackingEvents)l=u[o],this.trackingEvents[o]=l.slice(0);this.creative instanceof s?(this.setDuration(this.creative.duration),this.skipDelay=this.creative.skipDelay,this.linear=!0,this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1,this.variation&&(this.variation instanceof a?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates):this.variation instanceof r&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates))),this.on("start",(function(){n.lastSuccessfullAd=+new Date}))}return u(t,e),t.off=function(e,t){return this.removeListener(e,t)},t.prototype.setDuration=function(e){return this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},t.prototype.setProgress=function(e){var t,i,n,r,s,a,o,l,u;if(-1===(l=null===this.skipDelay?this.skipDelayDefault:this.skipDelay)||this.skipable||(l>e?this.emit("skip-countdown",l-e):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&this.assetDuration>0){if(i=[],e>0)for(a in i.push("start"),s=Math.round(e/this.assetDuration*100),i.push("progress-"+s+"%"),i.push("progress-"+Math.round(e)),o=this.quartiles)u=o[a],this.isQuartileReached(a,u,e)&&(i.push(a),this._alreadyTriggeredQuartiles[a]=!0);for(n=0,r=i.length;n<r;n++)t=i[n],this.track(t,!0);e<this.progress&&this.track("rewind")}return this.progress=e},t.prototype.isQuartileReached=function(e,t,i){var n;return n=!1,t<=i&&!this._alreadyTriggeredQuartiles[e]&&(n=!0),n},t.prototype.setMuted=function(e){return this.muted!==e&&this.track(e?"mute":"unmute"),this.muted=e},t.prototype.setPaused=function(e){return this.paused!==e&&this.track(e?"pause":"resume"),this.paused=e},t.prototype.setFullscreen=function(e){return this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen"),this.fullscreen=e},t.prototype.setExpand=function(e){return this.expanded!==e&&this.track(e?"expand":"collapse"),this.expanded=e},t.prototype.setSkipDelay=function(e){if("number"===typeof e)return this.skipDelay=e},t.prototype.load=function(){if(!this.impressed)return this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView")},t.prototype.errorWithCode=function(e){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:e})},t.prototype.complete=function(){return this.track("complete")},t.prototype.close=function(){return this.track(this.linear?"closeLinear":"close")},t.prototype.stop=function(){},t.prototype.skip=function(){return this.track("skip"),this.trackingEvents=[]},t.prototype.click=function(){var e,t,i;if((null!=(t=this.clickTrackingURLTemplates)?t.length:void 0)&&this.trackURLs(this.clickTrackingURLTemplates),null!=this.clickThroughURLTemplate)return this.linear&&(i={CONTENTPLAYHEAD:this.progressFormated()}),e=l.resolveURLTemplates([this.clickThroughURLTemplate],i)[0],this.emit("clickthrough",e)},t.prototype.track=function(e,t){var i,n;null==t&&(t=!1),"closeLinear"===e&&null==this.trackingEvents[e]&&null!=this.trackingEvents.close&&(e="close"),n=this.trackingEvents[e],i=this.emitAlwaysEvents.indexOf(e),null!=n?(this.emit(e,""),this.trackURLs(n)):-1!==i&&this.emit(e,""),!0===t&&(delete this.trackingEvents[e],i>-1&&this.emitAlwaysEvents.splice(i,1))},t.prototype.trackURLs=function(e,t){var i;return null==t&&(t={}),this.linear&&(null!=(null!=(i=this.creative.mediaFiles[0])?i.fileURL:void 0)&&(t.ASSETURI=this.creative.mediaFiles[0].fileURL),t.CONTENTPLAYHEAD=this.progressFormated()),l.track(e,t)},t.prototype.progressFormated=function(){var e,t,i,n;return(e=(n=parseInt(this.progress))/3600).length<2&&(e="0"+e),(t=n/60%60).length<2&&(t="0"+t),(i=n%60).length<2&&(i="0"+t),e+":"+t+":"+i+"."+parseInt(100*(this.progress-n))},t}(e("events").EventEmitter),t.exports=o},{"./client":3,"./companionad":4,"./creative":5,"./nonlinear":11,"./util":18,events:1}],15:[function(e,t,i){var n,r,s;s=e("./urlhandlers/xmlhttprequest"),r=e("./urlhandlers/flash"),n=function(){function t(){}return t.get=function(t,i,n){var a,o;return n||("function"===typeof i&&(n=i),i={}),null!=i.response?(o=i.response,delete i.response,n(null,o)):(null!=(a=i.urlhandler)?a.supported():void 0)?i.urlhandler.get(t,i,n):"undefined"===typeof window||null===window?e("./urlhandlers/node").get(t,i,n):s.supported()?s.get(t,i,n):r.supported()?r.get(t,i,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))},t}(),t.exports=n},{"./urlhandlers/flash":16,"./urlhandlers/xmlhttprequest":17}],16:[function(e,t,i){var n;n=function(){function e(){}return e.xdr=function(){var e;return window.XDomainRequest&&(e=new XDomainRequest),e},e.supported=function(){return!!this.xdr()},e.get=function(e,t,i){var n,r;return(r="function"===typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(r.async=!1,(n=this.xdr()).open("GET",e),n.timeout=t.timeout||0,n.withCredentials=t.withCredentials||!1,n.send(),n.onprogress=function(){},n.onload=function(){return r.loadXML(n.responseText),i(null,r)}):i(new Error("FlashURLHandler: Microsoft.XMLDOM format not supported"))},e}(),t.exports=n},{}],17:[function(e,t,i){var n;n=function(){function e(){}return e.xhr=function(){var e;if("withCredentials"in(e=new window.XMLHttpRequest))return e},e.supported=function(){return!!this.xhr()},e.get=function(e,t,i){var n;if("https:"===window.location.protocol&&0===e.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{return(n=this.xhr()).open("GET",e),n.timeout=t.timeout||0,n.withCredentials=t.withCredentials||!1,n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onreadystatechange=function(){if(4===n.readyState)return 200===n.status?i(null,n.responseXML):i(new Error("XHRURLHandler: "+n.statusText))},n.send()}catch(r){return i(new Error("XHRURLHandler: Unexpected error"))}},e}(),t.exports=n},{}],18:[function(e,t,i){var n;n=function(){function e(){}return e.track=function(e,t){var i,n,r,s,a,o;for(o=[],s=0,a=(n=this.resolveURLTemplates(e,t)).length;s<a;s++)i=n[s],"undefined"!==typeof window&&null!==window&&(r=new Image,o.push(r.src=i));return o},e.resolveURLTemplates=function(e,t){var i,n,r,s,a,o,l,u;for(null==t&&(t={}),i=[],null!=t.ASSETURI&&(t.ASSETURI=this.encodeURIComponentRFC3986(t.ASSETURI)),null!=t.CONTENTPLAYHEAD&&(t.CONTENTPLAYHEAD=this.encodeURIComponentRFC3986(t.CONTENTPLAYHEAD)),null==t.ERRORCODE||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=this.leftpad(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=this.encodeURIComponentRFC3986((new Date).toISOString()),t.RANDOM=t.random=t.CACHEBUSTING,n=0,s=e.length;n<s;n++)if(l=e[n]){for(r in t)u=t[r],a="["+r+"]",o="%%"+r+"%%",l=(l=l.replace(a,u)).replace(o,u);i.push(l)}return i},e.encodeURIComponentRFC3986=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))},e.leftpad=function(e){return e.length<8?function(){var t,i,n;for(n=[],t=0,i=8-e.length;0<=i?t<i:t>i;0<=i?t++:t--)n.push("0");return n}().join("")+e:e},e.storage=function(){var e,t;try{t="undefined"!==typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(i){t=null}return(null==t||function(e){var t;try{if(t="__VASTUtil__",e.setItem(t,t),e.getItem(t)!==t)return!0}catch(i){return!0}return!1}(t))&&(e={},t={length:0,getItem:function(t){return e[t]},setItem:function(t,i){e[t]=i,this.length=Object.keys(e).length},removeItem:function(t){delete e[t],this.length=Object.keys(e).length},clear:function(){e={},this.length=0}}),t}(),e.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e}(),t.exports=n},{}]},{},[9])(9)}}]);