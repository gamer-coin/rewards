"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3305],{4492:function(e,t,n){n.d(t,{Y:function(){return o},i:function(){return s}});var r=n(7294),i=n(5944),a=r.createContext(null);function o(){var e=r.useContext(a);if(null===e)throw Error("No ClipContext provider");return e}function s(e){var t=e.clip,n=e.children;return(0,i.tZ)(a.Provider,{value:t,children:n})}},8798:function(e,t,n){n.d(t,{j:function(){return s}});var r=n(6835),i=n(7294),a=n(9271),o=n(7327);function s(e,t,n){var s,c=i.useState(!1),u=(0,r.Z)(c,2),d=u[0],p=u[1],f=d?t:void 0,h=i.useMemo((function(){return(0,a.N)(e.EmbedUrl,{in_playlist:null!==n&&void 0!==n?n:void 0,t:f})}),[e.EmbedUrl,n,f]),y=i.useMemo((function(){return(0,a.N)(e.PublishedUrl,{in_playlist:null!==n&&void 0!==n?n:void 0,t:f})}),[e.PublishedUrl,n,f]),v=null!==(s=e.ShareUrl)&&void 0!==s?s:y;return i.useMemo((function(){var t=encodeURIComponent(e.Title),n=encodeURIComponent(v),r=(0,o.rP)({title:e.Title,embedUrl:h});return{config:{download:l({url:function(){var t=new URL(e.AudioUrl);return t.searchParams.set("download","true"),t.toString()},onClick:null}),email:l({url:function(){return"mailto:?subject=".concat(t,"&body=").concat(n)},onClick:null}),facebook:l({url:function(){return"https://www.facebook.com/sharer/sharer.php?u=".concat(n)},onClick:function(e){window.open(e,"facebook_share","height=320, width=640, resizable=yes, scrollbars=yes")}}),twitter:l({url:function(){return"https://twitter.com/intent/tweet?url=".concat(n,"&text=").concat(t)},onClick:function(e){window.open(e,"twitter_share","height=300, width=640, resizable=yes, scrollbars=yes")}}),whatsApp:l({url:function(){return"https://wa.me/?text=".concat(t," ").concat(n)},onClick:function(e){window.open(e,"whatsapp_share","height=300, width=640, resizable=yes, scrollbars=yes")}})},embedCode:r,shareUrl:v,showUrl:y,addTimestamp:d,setAddTimestamp:p}}),[d,e,h,v,y])}function l(e){var t=e.url,n=e.onClick,r=t();return{href:r,onClick:n?function(e){e.preventDefault(),n(r)}:void 0}}},2672:function(e,t,n){n.d(t,{X:function(){return l}});var r=n(9499),i=n(917),a=n(7138),o=n(5944),s="input[type=checkbox]:focus + span &, input[type=checkbox] + span:hover &";function l(e){var t,n=e.className,l=e.checked,c=e.children,u=e.onChange;return(0,o.BX)("label",{className:n,children:[(0,o.tZ)("input",{type:"checkbox",css:(0,i.iv)({position:"absolute","[dir=ltr] &":{left:-9999},"[dir=rtl] &":{right:-9999}},"",""),checked:l,onChange:function(e){return u(e.target.checked)}}),(0,o.BX)("span",{css:(0,i.iv)((0,r.Z)({cursor:"pointer",position:"relative",opacity:"0.6","[dir=ltr] &":{paddingLeft:"1.7em"},'[dir="rtl"] &':{paddingRight:"1.7em"}},"input[type=checkbox]:checked + &",{opacity:"1"}),"",""),children:[(0,o.tZ)("span",{role:"presentation",css:(0,i.iv)((0,r.Z)({width:"1em",height:"1em",position:"absolute",opacity:"0.7",border:"0.15em solid currentColor",borderRadius:4,boxSizing:"content-box",top:0,"[dir=ltr] &":{left:0},"[dir=rtl] &":{right:0}},s,{opacity:"1"}),"","")}),(0,o.tZ)(a.NO,{css:(0,i.iv)((t={position:"absolute",width:"0.98em",height:"0.98em",opacity:"0",top:"0.15em","[dir=ltr] &":{left:"0.15em"},"[dir=rtl] &":{right:"0.15em"}},(0,r.Z)(t,s,{opacity:"0.5"}),(0,r.Z)(t,"input[type=checkbox]:checked + span &",{opacity:"1"}),t),"","")}),c]})]})}},7599:function(e,t,n){n.d(t,{m:function(){return u}});n(7294);var r=n(4492),i=n(7147),a=n(166),o=n(5608),s=n(2165),l=n(6677),c=n(5944);function u(e){var t=e.withContent,n=(0,i.j)(),u=(0,r.Y)();if(!n.showBackgroundImage)return null;var d=function(e,t){if(e)return"full";switch(t.embedSize){case"Square":return"topAndBottom";case"Wide":return"full"}}(t,n);return(0,c.BX)("div",{css:[l.v8,"overflow:hidden;",""],children:[(0,c.tZ)(a.Z,{clip:u}),"Square"===n.embedSize&&(0,c.tZ)("img",{css:[{height:"auto",left:"50%",maxWidth:"100vh",position:"absolute",top:t?0:"50%",transform:t?"translate(-50%, 0)":"translate(-50%,-50%)",width:"100%",display:"block"},t&&{maskImage:"linear-gradient(to bottom, black 90%, transparent 100%)"},"",""],src:(0,s.Hn)(u.ImageUrl,"medium"),alt:""}),function(){switch(d){case"full":return(0,c.tZ)(o.V,{});case"topAndBottom":return(0,c.tZ)(o.g,{opacity:.65,heightTop:150,heightBottom:250})}}()]})}},9102:function(e,t,n){n.d(t,{C:function(){return $e}});var r=n(7294),i=n(9747),a=n(6835),o=n(7520),s=n(4492),l=n(7147),c=n(166),u=n(5608),d=n(6677),p=n(5944);function f(e){var t=e.children,n=e.hidden,r=void 0!==n&&n,i=e.setRootRef,a=(0,l.j)(),o=(0,s.Y)();return(0,p.BX)("div",{ref:i,css:[d.v8,{color:a.colorForeground,backgroundColor:a.colorBackground,zIndex:0},"",""],style:r?{visibility:"hidden"}:void 0,children:[(0,p.tZ)(h,{clip:o}),t]})}var h=function(e){var t=e.clip;return(0,l.j)().showBackgroundImage?(0,p.BX)("div",{css:[d.v8,{overflow:"hidden",zIndex:-1},"",""],children:[(0,p.tZ)(c.Z,{clip:t}),(0,p.tZ)(u.V,{})]}):null},y=n(6959);function v(e){var t=e.rootRef,n=e.focusTrapInitialElement,i=e.hidden,a=void 0!==i&&i,o=e.onClose,s=r.useRef({focusTrapInitialElement:n,onClose:o});return r.useEffect((function(){s.current.focusTrapInitialElement=n,s.current.onClose=o})),r.useEffect((function(){var e;if(!a&&t){var n=(0,y.v)(t,{clickOutsideDeactivates:!1,escapeDeactivates:!1,initialFocus:null!==(e=s.current.focusTrapInitialElement)&&void 0!==e?e:void 0});n.activate();var r=function(e){"Escape"!==e.code&&27!==e.keyCode||s.current.onClose()};return document.addEventListener("keydown",r),function(){n.deactivate(),document.removeEventListener("keydown",r)}}}),[a,t]),{closeOverlay:o}}function m(e){var t=e.player,n=r.useState(null),i=(0,a.Z)(n,2),s=i[0],l=i[1],c=r.useState(null),u=(0,a.Z)(c,2),d=u[0],h=u[1],y="ad"===t.mode.type?t.mode:null,m=null===y,g="loading"===(null===y||void 0===y?void 0:y.adCacheState.type);v({rootRef:s,focusTrapInitialElement:d,hidden:m,onClose:function(){}});var b=r.useMemo((function(){var e,t;return y&&"loaded"===y.adCacheState.type?{companionImageUrl:null!==(e=null===(t=y.adCacheState.adData.companion)||void 0===t?void 0:t.ad.staticResource)&&void 0!==e?e:null,isAdClickable:Boolean(y.adCacheState.adData.creative.videoClickThroughURLTemplate),mode:y.adCacheState.adData.type,skipDelay:y.adCacheState.adData.skipDelay}:{companionImageUrl:null,isAdClickable:!1,mode:"audio",skipDelay:null}}),[y]),w=b.companionImageUrl,S=b.isAdClickable,k=b.mode,_=b.skipDelay,C=t.adMediaState.currentTime,Z=t.adMediaState.duration,P=null!==Z?C/Z:0,O=null!==Z?Z-C:null,x=null!==_?_-C:null;return(0,p.tZ)(f,{hidden:m,setRootRef:l,children:(0,p.tZ)(o.S,{loading:g,children:(0,p.tZ)(o.c,{companionImageUrl:w,isAdClickable:S,isBuffering:t.adMediaState.isBuffering,isPlaying:t.adMediaState.isPlaying,mode:k,playbackProgress:P,playbackTimeRemaining:O,skipTimeRemaining:x,videoElement:t.adVideoElement,onAdButtonClick:function(){t.adClick()},onPlaybackToggle:function(){t.togglePlayback()},onSkip:function(){t.adSkip()},setPlayButtonElement:h})})})}var g=n(917),b=n(4012),w=n(7474),S=n(5988),k=n(3874),_=n(7138),C=n(9440),Z=n(7033);var P={name:"dzbs2",styles:'flex:1 auto;[dir="ltr"] &{padding-right:38px;}[dir="rtl"] &{padding-left:38px;}'},O={name:"zjik7",styles:"display:flex"};function x(e){var t=e.children,n=e.onClose,i=(0,l.j)(),o=(0,C.ql)().intl,s=r.useState(null),c=(0,a.Z)(s,2),u=c[0],h=c[1],y=v({rootRef:u,onClose:n}).closeOverlay;return(0,p.tZ)(f,{setRootRef:h,children:(0,p.BX)("div",{css:[d.v8,"display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;padding:15px;",""],children:[(0,p.tZ)(j,{children:(0,p.tZ)(w._c,{type:"round",title:o.formatMessage({id:"AwDfR7",defaultMessage:[{type:0,value:"Close"}]}),onClick:y,children:(0,p.tZ)(_.bM,{})})}),(0,p.tZ)("div",{css:P,children:t}),(0,p.tZ)(S.q,{height:12}),(0,p.BX)("div",{css:O,children:[(0,p.tZ)("a",{href:(0,k.K5)("omnyCmsBaseUrl")+"/policies/listener/?utm_source=omnyfm-embed&utm_medium=player",target:"_blank",rel:"noreferrer",css:[d.PO,"font-size:12.6px;line-height:1.7;opacity:0.6;&:hover, &:focus{opacity:1;}",""],children:(0,p.tZ)(b.Z,{id:"eeGno2",defaultMessage:[{type:0,value:"Listener privacy policy"}]})}),(0,p.tZ)(S.g,{}),function(){switch(i.branding.type){case"branded":switch(i.branding.wide.type){case"custom":return(0,p.tZ)(A,{href:i.branding.wide.logoUrl,logoImageSrc:i.branding.wide.logoImageSrc,title:i.branding.wide.logoTitle});case"none":return null}break;case"omny":return(0,p.tZ)(I,{})}}()]})]})})}function E(e){var t=e.title,n=e.children,r=e.textWrapping;return(0,p.tZ)("h3",{title:t,css:[r?null:d.FF,Z.v.bold,"font-size:15.5px;line-height:165%;text-transform:uppercase;",""],children:n})}function T(e){var t=e.title,n=e.children;return(0,p.tZ)("h4",{title:t,css:[Z.v.bold,"font-size:12.6px;line-height:165%;opacity:0.5;text-transform:uppercase;",""],children:n})}function A(e){var t=e.href,n=e.logoImageSrc,r=e.title;return(0,p.tZ)("a",{href:t,title:r,target:"_blank",rel:"noreferrer",css:(0,g.iv)({height:24,display:"flex",alignItems:"center"},"",""),children:(0,p.tZ)("img",{src:n,css:(0,g.iv)({display:"block",maxWidth:200,maxHeight:24},"",""),alt:r})})}var M={name:"6x8swu",styles:"width:auto;height:14.39px;vertical-align:middle"};function I(){var e=(0,C.ql)().intl;return(0,p.tZ)("a",{css:[d.PO,"font-size:12.6px;line-height:1.7;opacity:0.6;&:hover, &:focus{opacity:1;}",""],href:"".concat((0,k.K5)("omnyCmsBaseUrl"),"/learn/?utm_source=omnyfm-embed&utm_medium=overlay"),target:"_blank",rel:"noreferrer",title:e.formatMessage({id:"GQjAJn",defaultMessage:[{type:0,value:"Powered by Omny Studio"}]}),children:(0,p.tZ)(b.Z,{id:"QL4EiB",defaultMessage:[{type:0,value:"Powered by "},{type:1,value:"logo"}],values:{logo:(0,p.tZ)(_.sE,{css:M})}})})}var D={name:"tpedl1",styles:"display:flex;justify-content:flex-end;opacity:0.8"},U={name:"1jsdrh6",styles:'position:fixed;width:0;[dir="ltr"] & > *{transform:translateX(-100%);}[dir="rtl"] & > *{transform:translateX(100%);}'};function j(e){var t=e.children;return(0,p.tZ)("div",{css:D,children:(0,p.tZ)("div",{css:U,children:t})})}var B=n.p+"static/media/applepodcasts-ar.49f5b35b.svg",R=n.p+"static/media/applepodcasts-cs.2e1b1c37.svg",L=n.p+"static/media/applepodcasts-da.d4fd3100.svg",z=n.p+"static/media/applepodcasts-de.2c1a6af2.svg",H=n.p+"static/media/applepodcasts-en.9de19a7b.svg",X=n.p+"static/media/applepodcasts-es.2644be7d.svg",N=n.p+"static/media/applepodcasts-fr.3d1d16fd.svg",F=n.p+"static/media/applepodcasts-he.bfbeb867.svg",q=n.p+"static/media/applepodcasts-it.9e7091fb.svg",W=n.p+"static/media/applepodcasts-ja.0c2e5d8d.svg",V=n.p+"static/media/applepodcasts-ms.1ae5b248.svg",G=n.p+"static/media/applepodcasts-nl.7c3db602.svg",Y=n.p+"static/media/applepodcasts-pt-br.c4c06cf9.svg",J=n.p+"static/media/applepodcasts-pt-pt.aaec67f7.svg",$=n.p+"static/media/applepodcasts-tr.d025c81d.svg",K=n.p+"static/media/googlepodcasts-ar.f081fe3d.svg",Q=n.p+"static/media/googlepodcasts-cs.068ce1d7.svg",ee=n.p+"static/media/googlepodcasts-da.5c7fcabd.svg",te=n.p+"static/media/googlepodcasts-de.3fa9a46c.svg",ne=n.p+"static/media/googlepodcasts-en.c7e5774d.svg",re=n.p+"static/media/googlepodcasts-es.25d85bb1.svg",ie=n.p+"static/media/googlepodcasts-fr.26f87f87.svg",ae=n.p+"static/media/googlepodcasts-he.bf74e47e.svg",oe=n.p+"static/media/googlepodcasts-it.342698d8.svg",se=n.p+"static/media/googlepodcasts-ja.7d752462.svg",le=n.p+"static/media/googlepodcasts-ms.09d058a0.svg",ce=n.p+"static/media/googlepodcasts-nl.3e53e281.svg",ue=n.p+"static/media/googlepodcasts-pt-br.f2698070.svg",de=n.p+"static/media/googlepodcasts-pt-pt.0d7fe0a8.svg",pe=n.p+"static/media/googlepodcasts-tr.52432546.svg";var fe=(0,d.nD)(11,14);function he(e){var t=e.directoryLinks,n=e.program,i=e.onClose,o=(0,C.ql)(),s=o.intl,l=function(e){var t=r.useMemo((function(){switch(e){case"ar":return[B,K];case"cs":return[R,Q];case"da-beta":return[L,ee];case"de":return[z,te];case"en":return[H,ne];case"es":return[X,re];case"fr-ca":case"fr-fr":return[N,ie];case"he":return[F,ae];case"it":return[q,oe];case"ja":return[W,se];case"ms":return[V,le];case"nl-beta":return[G,ce];case"pt-br":return[Y,ue];case"pt-pt":return[J,de];case"tr":return[$,pe]}}),[e]),n=(0,a.Z)(t,2);return{applePodcastsSrc:n[0],googlePodcastsSrc:n[1]}}(o.locale),c=l.applePodcastsSrc,u=l.googlePodcastsSrc;return(0,p.BX)(x,{onClose:i,children:[(0,p.tZ)(E,{children:(0,p.tZ)(b.Z,{id:"kvqnxP",defaultMessage:[{type:0,value:"Follow "},{type:1,value:"programName"}],values:{programName:n.Name}})}),(0,p.tZ)(S.q,{height:10}),(0,p.BX)("ul",{css:fe.parentCss,children:[(0,p.tZ)(ye,{href:t.ApplePodcasts,imageSrc:c,imageWidth:141,imageHeight:34,title:s.formatMessage({id:"c+9ECi",defaultMessage:[{type:0,value:"Listen on Apple Podcasts"}]})}),(0,p.tZ)(ye,{href:t.GooglePodcasts,imageSrc:u,imageWidth:134,imageHeight:34,title:s.formatMessage({id:"3gTbcy",defaultMessage:[{type:0,value:"Listen on Google Podcasts"}]})})]}),(0,p.tZ)(S.q,{height:13}),(0,p.BX)("ul",{css:fe.parentCss,children:[(0,p.tZ)(me,{href:t.GooglePlay,title:s.formatMessage({id:"Yza5wO",defaultMessage:[{type:0,value:"Listen on Google Play"}]}),label:s.formatMessage({id:"LW6LLp",defaultMessage:[{type:0,value:"Google Play"}]}),styles:w.cX,Icon:_.gY}),(0,p.tZ)(me,{href:t.Spotify,title:s.formatMessage({id:"LSQUN7",defaultMessage:[{type:0,value:"Listen on Spotify"}]}),label:s.formatMessage({id:"kalFZV",defaultMessage:[{type:0,value:"Spotify"}]}),styles:w.hX,Icon:_.PD}),(0,p.tZ)(me,{href:t.Stitcher,title:s.formatMessage({id:"cBy1qT",defaultMessage:[{type:0,value:"Listen on Stitcher"}]}),label:s.formatMessage({id:"4LRxr6",defaultMessage:[{type:0,value:"Stitcher"}]}),styles:w.ak,Icon:_.A5}),(0,p.tZ)(me,{href:t.TuneIn,title:s.formatMessage({id:"W30Prn",defaultMessage:[{type:0,value:"Listen on TuneIn"}]}),label:s.formatMessage({id:"A5L2ca",defaultMessage:[{type:0,value:"TuneIn"}]}),styles:w.ZX,Icon:_.eL}),(0,p.tZ)(me,{href:t.RssFeed,title:s.formatMessage({id:"758ufn",defaultMessage:[{type:0,value:"Open RSS feed"}]}),label:s.formatMessage({id:"eDeMLC",defaultMessage:[{type:0,value:"RSS feed"}]}),styles:w.Yq,Icon:_.o0})]})]})}function ye(e){var t=e.href,n=e.imageSrc,r=e.imageWidth,i=e.imageHeight,a=e.title;return t?(0,p.tZ)("li",{css:fe.childCss,children:(0,p.tZ)("a",{href:t,title:a,target:"_blank",rel:"noreferrer",css:(0,g.iv)({display:"block",height:i},"",""),children:(0,p.tZ)("img",{src:n,alt:a,width:r,height:i})})}):null}var ve={name:"157xhr7",styles:"width:16px;height:16px"};function me(e){var t=e.href,n=e.title,r=e.label,i=e.styles,a=e.Icon;return t?(0,p.tZ)("li",{css:fe.childCss,children:(0,p.BX)("a",{href:t,target:"_blank",title:n,rel:"noreferrer",css:[d.PO,i,"",""],children:[a?(0,p.BX)(p.HY,{children:[(0,p.tZ)(a,{css:ve}),(0,p.tZ)(S.g,{width:4})]}):null,r]})}):null}var ge=n(4490),be=n(9091),we=n(2578),Se=n(6577);var ke={name:"17q6ypd",styles:"font-size:14px;line-height:1.7"},_e=(0,d.nD)(28,28),Ce=(0,d.nD)(11,14);function Ze(e){var t,n=e.program,i=e.onClose,a=(0,l.j)(),o=(0,C.ql)().intl,c=(0,s.Y)(),u=r.useMemo((function(){return c.PublishedUtc?(0,be.pB)(c.PublishedUtc):null}),[c.PublishedUtc]),d=null!==(t=c.ShareUrl)&&void 0!==t?t:(0,we.hV)({clipProgram:n,clip:c}),f=n.SocialFacebook,h=function(e){var t=e.program;return t.Hidden?null:(0,we.z)({program:t})}({program:n}),y=n.SocialTwitter,v=n.SocialWeb,m=n.SocialShowSupportLabel,g=n.SocialShowSupportUrl,k=m||o.formatMessage({id:"Yo7we+",defaultMessage:[{type:0,value:"Support the show"}]}),Z=m||o.formatMessage({id:"fqJT6M",defaultMessage:[{type:0,value:"Support the show"}]}),P=(0,w.ei)("default");return(0,p.BX)(x,{onClose:i,children:[(0,p.tZ)(E,{title:c.Title,textWrapping:!0,children:(0,p.tZ)("bdi",{children:c.Title})}),(0,p.tZ)(S.q,{height:12}),c.DescriptionHtml?(0,p.BX)(p.HY,{children:[(0,p.tZ)(T,{children:(0,p.tZ)(b.Z,{id:"ESAPIU",defaultMessage:[{type:0,value:"Description"}]})}),(0,p.tZ)(S.q,{height:3}),(0,p.tZ)(Ee,{descriptionHtml:c.DescriptionHtml}),(0,p.tZ)(S.q,{height:12})]}):null,(0,p.BX)("div",{css:_e.parentCss,children:[u?(0,p.BX)("div",{css:_e.childCss,children:[(0,p.tZ)(T,{children:(0,p.tZ)(b.Z,{id:"Q1kzaa",defaultMessage:[{type:0,value:"Published"}]})}),(0,p.tZ)(S.q,{height:4}),(0,p.tZ)("p",{css:ke,children:(0,p.tZ)(ge.Ji,{value:u,year:"numeric",month:"long",day:"numeric",weekday:"long",hour12:!0,hour:"numeric",minute:"2-digit"})})]}):null,c.Season?(0,p.BX)("div",{css:_e.childCss,children:[(0,p.tZ)(T,{children:(0,p.tZ)(b.Z,{id:"vdnkpC",defaultMessage:[{type:0,value:"Season"}]})}),(0,p.tZ)(S.q,{height:4}),(0,p.tZ)("p",{css:ke,children:c.Season})]}):null,c.Episode?(0,p.BX)("div",{css:_e.childCss,children:[(0,p.tZ)(T,{children:(0,p.tZ)(b.Z,{id:"W8/Tzh",defaultMessage:[{type:0,value:"Episode"}]})}),(0,p.tZ)(S.q,{height:4}),(0,p.tZ)("p",{css:ke,children:c.Episode})]}):null]}),(0,p.tZ)(S.q,{height:16}),(0,p.BX)("ul",{css:Ce.parentCss,children:[a.showShare?(0,p.tZ)(Oe,{href:d,title:o.formatMessage({id:"vcjys0",defaultMessage:[{type:0,value:"View more info"}]}),styles:P,Icon:_.aU,children:(0,p.tZ)(b.Z,{id:"6vU/6A",defaultMessage:[{type:0,value:"More info"}]})}):null,a.showProgram&&a.showShare&&h?(0,p.tZ)(Oe,{href:h,title:o.formatMessage({id:"RtFmPt",defaultMessage:[{type:0,value:"View more episodes"}]}),styles:P,Icon:_.Fz,children:(0,p.tZ)(b.Z,{id:"DBQTk9",defaultMessage:[{type:0,value:"More episodes"}]})}):null,a.showProgram&&v?(0,p.tZ)(Oe,{href:v,title:o.formatMessage({id:"7BjVAW",defaultMessage:[{type:0,value:"View show website"}]}),styles:P,Icon:_.vc,children:(0,p.tZ)(b.Z,{id:"zKdTpz",defaultMessage:[{type:0,value:"Show website"}]})}):null,a.showProgram&&f?(0,p.tZ)(Oe,{href:"https://facebook.com/".concat(f),title:o.formatMessage({id:"nTaRjo",defaultMessage:[{type:0,value:"View show Facebook page"}]}),styles:w.w6,Icon:_.zJ,children:(0,p.tZ)(b.Z,{id:"3gxFVZ",defaultMessage:[{type:0,value:"Facebook"}]})}):null,a.showProgram&&y?(0,p.tZ)(Oe,{href:"https://twitter.com/".concat(y),title:o.formatMessage({id:"T+vJp9",defaultMessage:[{type:0,value:"View show Twitter feed"}]}),styles:w.fB,Icon:_.JD,children:(0,p.tZ)(b.Z,{id:"O2D6B3",defaultMessage:[{type:0,value:"Twitter"}]})}):null,a.showProgram&&g?(0,p.tZ)(Oe,{href:g,title:Z,styles:w.f3,Icon:_.M6,children:k}):null]})]})}var Pe={name:"1eg0rk6",styles:"width:18px;height:18px"};function Oe(e){var t=e.href,n=e.title,r=e.styles,i=e.Icon,a=e.children;return(0,p.tZ)("li",{css:Ce.childCss,children:(0,p.BX)("a",{href:t,title:n,target:"_blank",rel:"noreferrer",css:[d.PO,r,"",""],children:[(0,p.tZ)(i,{css:Pe}),(0,p.tZ)(S.g,{width:4}),a]})})}var xe={name:"ty8c7z",styles:"margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px;padding-inline-start:40px"};function Ee(e){var t=e.descriptionHtml,n=(0,Se.G)(t);return(0,p.tZ)("bdi",{css:[ke,d.kZ,{a:{color:"currentcolor"},p:{margin:"0 0 9.8px"},em:{fontStyle:"italic"},ol:[xe,{listStyleType:"decimal"}],ul:[xe,{listStyleType:"disc"}],blockquote:{fontStyle:" italic",margin:"0 0 0 0","& p":{borderLeft:"2px solid currentColor",padding:"0 0 0 0.5em"},'& p[dir="rtl"]':{borderLeft:"none",borderRight:"2px solid currentColor",padding:"0 0.5em 0 0"}},hr:{opacity:"0.3",margin:"2em 0"}},"",""],dangerouslySetInnerHTML:{__html:n}})}var Te={name:"8zonlz",styles:"font-size:14px;line-height:1.7;margin:0 0 9.8px"},Ae={name:"1eg0rk6",styles:"width:18px;height:18px"},Me={name:"xmrttv",styles:"font-size:11.2px;line-height:1.7;margin-top:14px;opacity:0.5"};function Ie(e){var t=e.error,n=e.onClose,i=(0,C.ql)().intl,o=r.useState(null),s=(0,a.Z)(o,2),l=s[0],c=s[1],u=v({rootRef:l,onClose:n}).closeOverlay;return(0,p.tZ)(f,{setRootRef:c,children:(0,p.BX)("div",{css:[d.v8,"display:flex;flex-direction:column;align-items:center;justify-content:center;overflow-x:hidden;overflow-y:auto;padding:15px;",""],children:[(0,p.tZ)("h1",{css:[Z.v.bold,"font-size:15.5px;line-height:25.575px;margin:0 0 9.8px;text-transform:uppercase;",""],children:(0,p.tZ)(b.Z,{id:"ikw6Py",defaultMessage:[{type:0,value:"There was problem playing the audio"}]})}),(0,p.tZ)("p",{css:Te,children:(0,p.tZ)(b.Z,{id:"reeitS",defaultMessage:[{type:0,value:"Check your internet connection, disable any ad blockers, and try again."}]})}),(0,p.tZ)("div",{children:(0,p.BX)(w._c,{type:"default",title:i.formatMessage({id:"+Dqi/T",defaultMessage:[{type:0,value:"Try again"}]}),onClick:u,children:[(0,p.tZ)(_.Pe,{css:Ae}),(0,p.tZ)(S.g,{width:4}),(0,p.tZ)(b.Z,{id:"HqVO14",defaultMessage:[{type:0,value:"Try again"}]})]})}),void 0!==t.code?(0,p.tZ)("p",{css:Me,children:t.message?(0,p.tZ)(b.Z,{id:"HV7zOp",defaultMessage:[{type:1,value:"message"},{type:0,value:" (Error code "},{type:1,value:"code"},{type:0,value:")"}],values:{code:t.code,message:t.message}}):(0,p.tZ)(b.Z,{id:"LPN1SI",defaultMessage:[{type:0,value:"Error code "},{type:1,value:"code"}],values:{code:t.code}})}):null]})})}var De=n(29),Ue=n(7794),je=n.n(Ue),Be=n(8798),Re=n(2672),Le=n(1199);var ze=(0,d.nD)(18,14),He={name:"1rycmec",styles:"font-size:14px;line-height:165%"};function Xe(e){var t=e.currentPlayTime,n=e.onClose,r=(0,l.j)(),i=(0,C.ql)().intl,a=(0,s.Y)(),o=(0,Be.j)(a,t,r.inPlaylist),c=(0,w.ei)("default");return(0,p.BX)(x,{onClose:n,children:[(0,p.BX)(E,{children:[(0,p.tZ)(b.Z,{id:"yOelfI",defaultMessage:[{type:0,value:"Share"}]}),(0,p.tZ)(S.g,{width:18}),a.ShareUrl?null:(0,p.tZ)(Re.X,{css:He,checked:o.addTimestamp,onChange:o.setAddTimestamp,children:(0,p.tZ)(b.Z,{id:"fPmR/e",defaultMessage:[{type:0,value:"Play from "},{type:1,value:"time"}],values:{time:(0,be.R)(t)}})})]}),(0,p.tZ)(S.q,{height:16}),(0,p.BX)("ul",{css:ze.parentCss,children:[(0,p.tZ)(Ge,{config:o.config.facebook,styles:w.w6,title:i.formatMessage({id:"Kbrx84",defaultMessage:[{type:0,value:"Share on Facebook"}]}),Icon:_.zJ,children:(0,p.tZ)(b.Z,{id:"JRdGvW",defaultMessage:[{type:0,value:"Facebook"}]})}),(0,p.tZ)(Ge,{config:o.config.twitter,styles:w.fB,title:i.formatMessage({id:"TyRLwZ",defaultMessage:[{type:0,value:"Share on Twitter"}]}),Icon:_.JD,children:(0,p.tZ)(b.Z,{id:"2iiirI",defaultMessage:[{type:0,value:"Twitter"}]})}),(0,p.tZ)(Ge,{config:o.config.email,styles:w.V,title:i.formatMessage({id:"24cf3G",defaultMessage:[{type:0,value:"Email link"}]}),Icon:_.Bd,children:(0,p.tZ)(b.Z,{id:"24cf3G",defaultMessage:[{type:0,value:"Email link"}]})}),(0,p.tZ)(Ge,{config:o.config.whatsApp,styles:w.Sm,title:i.formatMessage({id:"qP9EVI",defaultMessage:[{type:0,value:"Share on WhatsApp"}]}),Icon:_.SC,children:(0,p.tZ)(b.Z,{id:"ZE7itt",defaultMessage:[{type:0,value:"WhatsApp"}]})}),r.showDownload?(0,p.tZ)(Ge,{config:o.config.download,styles:c,title:i.formatMessage({id:"6DfCqJ",defaultMessage:[{type:0,value:"Download audio"}]}),Icon:_.Dj,children:(0,p.tZ)(b.Z,{id:"5D0NUn",defaultMessage:[{type:0,value:"Download"}]})}):null,(0,p.tZ)(We,{title:i.formatMessage({id:"KqRtmH",defaultMessage:[{type:0,value:"Copy link"}]}),copyText:o.shareUrl,Icon:_.JH,children:(0,p.tZ)(b.Z,{id:"X/+GSq",defaultMessage:[{type:0,value:"Copy link"}]})}),(0,p.tZ)(We,{title:i.formatMessage({id:"RfnX/1",defaultMessage:[{type:0,value:"Copy embed code"}]}),copyText:o.embedCode,Icon:_.g9,children:(0,p.tZ)(b.Z,{id:"fuWkBT",defaultMessage:[{type:0,value:"Copy embed"}]})})]})]})}var Ne={name:"4djive",styles:"transition:opacity 0.2s"},Fe={name:"qowjig",styles:"align-items:center;display:inline-flex"},qe={name:"5ob2ly",styles:"display:flex;position:relative"};function We(e){var t=e.title,n=e.copyText,r=e.Icon,i=e.children,a=e.onClick,o=(0,Le.c)(),s=o.clipboardState,l=o.copyTextToClipboard,c=(0,w.ei)("default");return(0,p.tZ)("li",{css:ze.childCss,children:(0,p.BX)("button",{type:"button",title:t,disabled:"copying"===s,css:[c,Fe,"",""],onClick:(0,De.Z)(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===a||void 0===a||a(),l(n);case 2:case"end":return e.stop()}}),e)}))),children:[(0,p.BX)("span",{css:qe,children:[(0,p.tZ)(r,{css:Ne,style:{width:18,height:18,opacity:"success"===s?"0":"1"}}),(0,p.tZ)(_.NO,{css:[Ne,"left:0;position:absolute;",""],style:{width:18,height:18,opacity:"success"===s?"1":"0"}})]}),(0,p.tZ)(S.g,{width:4}),i]})})}var Ve={name:"1eg0rk6",styles:"width:18px;height:18px"};function Ge(e){var t=e.config,n=e.styles,r=e.title,i=e.Icon,a=e.children;return(0,p.tZ)("li",{css:ze.childCss,children:(0,p.BX)("a",{href:t.href,title:r,target:"_blank",rel:"noreferrer",css:[d.PO,Fe,n,"",""],onClick:t.onClick,children:[(0,p.tZ)(i,{css:Ve}),(0,p.tZ)(S.g,{width:4}),a]})})}var Ye=n(6453),Je=n(720),$e=function(e){var t=e.program,n=e.clipOverlay,r=(0,Ye.n)(),a=n.overlayState;return(0,p.BX)(p.HY,{children:[(0,p.tZ)(i.Z,{component:null,children:"none"!==a.type?(0,p.tZ)(Je.CO,{timeout:Je.Is,children:function(){switch(a.type){case"follow":return(0,p.tZ)(he,{directoryLinks:a.directoryLinks,program:t,onClose:n.closeOverlay});case"info":return(0,p.tZ)(Ze,{program:t,onClose:n.closeOverlay});case"share":return(0,p.tZ)(Xe,{currentPlayTime:r.clipCurrentTime,onClose:n.closeOverlay})}}()}):null}),(0,p.tZ)(i.Z,{component:null,children:"error"===r.playState.type?(0,p.tZ)(Je.CO,{timeout:Je.Is,children:(0,p.tZ)(Ie,{error:r.playState.error,onClose:function(){r.play()}})}):null}),(0,p.tZ)(Je.CO,{in:"ad"===r.mode.type,timeout:600,children:(0,p.tZ)(m,{player:r})})]})}},8181:function(e,t,n){n.d(t,{c:function(){return ve},h:function(){return Me}});var r=n(9499),i=n(917),a=n(6835),o=n(2192),s=n(7294),l=n(4492),c=n(7474),u=n(7147),d=n(9086),p=n(7138),f=n(9440),h=n(6677),y=n(5944);var v,m,g={Square:{buttonSize:50,iconSize:28},Wide:{buttonSize:60,iconSize:32}},b={name:"1u907vd",styles:"position:relative;left:2px"},w=function(e){var t=e.playState,n=e.buffering,r=e.size,i=e.onClick,a=(0,u.j)(),o=(0,f.ql)().intl,l=g[r].buttonSize,c=g[r].iconSize,v=s.useMemo((function(){switch(t.type){case"error":case"paused":return{showPlayIcon:!0,showBuffering:!1};case"playing":return{showPlayIcon:!1,showBuffering:n}}}),[n,t.type]),m=v.showPlayIcon,w=v.showBuffering;return(0,y.BX)("button",{css:[h.d$,{background:a.colorHighlight,color:a.colorHighlightInvert,borderRadius:"50%",height:l,transition:"transform 0.1s",width:l,flex:"none",position:"relative","&:hover, &:focus":{transform:"scale(1.08)"},"&:active":{transform:"scale(1)"}},"",""],type:"button",title:m?o.formatMessage({id:"U0bK/q",defaultMessage:[{type:0,value:"Play"}]}):o.formatMessage({id:"nuawIM",defaultMessage:[{type:0,value:"Pause"}]}),onClick:i,children:[w&&(0,y.tZ)(d.$,{borderWidth:2,size:"cover"}),m?(0,y.tZ)(p.JF,{width:c,height:c,css:b}):(0,y.tZ)(p.ky,{width:c,height:c})]})},S=n(5988),k=n(1383),_=n(7033);var C=35,Z=2,P=50,O={name:"r5gyjf",styles:"position:absolute;display:flex;height:100%;width:100%"};function x(e){var t=e.clip,n=e.hasTextShadow,r=s.useRef(null),o=s.useRef(null),l=s.useState(!1),c=(0,a.Z)(l,2),u=c[0],d=c[1],p=s.useState(null),f=(0,a.Z)(p,2),v=f[0],m=f[1],g=s.useState("running"),b=(0,a.Z)(g,2),w=b[0],S=b[1],k=s.useState("none"),_=(0,a.Z)(k,2),x=_[0],E=_[1],M=s.useState("none"),U=(0,a.Z)(M,2),R=U[0],L=U[1],z=s.useState({wrapperWidth:0,textWidth:0}),H=(0,a.Z)(z,2),X=H[0],N=H[1],F=t.Title;s.useEffect((function(){var e=document.createElement("bdi");e.innerText=F,document.body.appendChild(e);var t=window.getComputedStyle(e).direction;document.body.removeChild(e),m(A(t))}),[F]),s.useEffect((function(){var e=function(){if(null===r.current||null===o.current)throw Error("missing ref(s)");var e=r.current.offsetWidth,t=o.current.offsetWidth;N({wrapperWidth:e,textWidth:t}),d(t>e)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[F]),s.useEffect((function(){E("none"),L("none")}),[u,F]),s.useEffect((function(){u&&(E("rampingUp"),L("textEnd"))}),[u]);s.useEffect((function(){if(void 0!==window.IntersectionObserver){var e=new window.IntersectionObserver((function(e){var t=(0,a.Z)(e,1)[0];S(t.isIntersecting?"running":"paused")}));return e.observe(document.body),function(){e.unobserve(document.body)}}}),[]);var q=function(e,t,n,r){return s.useMemo((function(){if(r&&"none"!==e){var i=10/t.wrapperWidth*100,a={opaque:"rgb(0,0,0)",transparent:"rgba(0,0,0,0)"},o=function(){var t=i,r=0,o="".concat(a.transparent," ").concat(r,"%, ").concat(a.opaque," ").concat(t,"%"),s="textStartAndEnd"===e||"textEnd"===e&&"rtl"===n,l="".concat(a.opaque," ").concat(r,"%");return s?o:l}(),s=function(){var t=100,r=t-i,o="".concat(a.opaque," ").concat(r,"%, ").concat(a.transparent," ").concat(t,"%"),s="textStartAndEnd"===e||"textEnd"===e&&"ltr"===n,l="".concat(a.opaque," ").concat(r,"%");return s?o:l}();return"linear-gradient(90deg, ".concat(o,", ").concat(s,")")}}),[t.wrapperWidth,e,n,r])}(R,X,v,u),W=function(){switch(x){case"rampingUp":return"rtl"===v?D:I;case"continuous":return"rtl"===v?B:j;case"none":return}}(),V=function(){switch(x){case"rampingUp":return Z+"s";case"continuous":return(X.textWidth+P)/C/2+"s";case"none":return}}(),G=(0,i.iv)([W,{whiteSpace:"nowrap",willChange:"transform",animationDuration:V,animationPlayState:w}],"","");return(0,y.tZ)("div",{ref:r,title:F,css:O,children:(0,y.BX)("div",{dir:null!==v&&void 0!==v?v:void 0,css:[{display:"flex",overflow:"hidden",maskImage:q},n?{textShadow:h.XC}:void 0,h.L2,"",""],onMouseEnter:function(){return S("paused")},onMouseLeave:function(){return S("running")},children:[(0,y.tZ)("div",{css:G,onAnimationStart:function(){L("textStartAndEnd")},onAnimationEnd:function(){E("continuous")},children:(0,y.tZ)(T,{clip:t,textRef:o,textTruncated:u,textDirection:v})}),u?(0,y.tZ)("div",{css:G,children:(0,y.tZ)(T,{clip:t,textRef:void 0,textTruncated:u,textDirection:v})}):null]})})}var E={name:"lugakg",styles:"font-weight:normal"};function T(e){var t=e.clip,n=e.textRef,r=e.textTruncated,i=e.textDirection,a=(0,f.ql)().intl,o="Explicit"===t.ContentRating?(0,y.tZ)("span",{title:a.formatMessage({id:"wEK2mB",defaultMessage:[{type:0,value:"Explicit"}]}),css:E,children:"\ud83c\udd74"}):null,s=t.Title;return(0,y.BX)("span",{css:[{visibility:null===i?"hidden":void 0},_.v.semibold,"",""],children:[(0,y.BX)("span",{ref:n,children:[o,null!==o?(0,y.tZ)(S.g,{width:8}):null,s]}),r?(0,y.tZ)(S.g,{width:P}):null]})}var A=function(e){var t="ltr";switch(e){case t:case"rtl":return e;default:return console.log("Invalid computed direction ".concat(""===e?"<empty string>":e,", expected ").concat(t," or ").concat("rtl")),t}};function M(e){return(0,i.iv)({animationName:(0,i.F4)(v||(v=(0,k.Z)(["\n            0% {\n                transform: translateX(0px);\n            }\n            100% {\n                transform: translateX(","px);\n            }\n        "])),C*Z*e),animationTimingFunction:"ease-in",animationDelay:"5s"},"","")}var I=M(-1),D=M(1);function U(e){return(0,i.iv)({animationName:(0,i.F4)(m||(m=(0,k.Z)(["\n            0% {\n                transform: translateX(0px);\n            }\n            100% {\n                transform: translateX(","%);\n            }\n        "])),100*e),animationTimingFunction:"linear",animationDelay:-Z/2+"s",animationIterationCount:"infinite"},"","")}var j=U(-1),B=U(1);var R=n(3874),L=n(9091),z=n(2165),H=n(6453),X=n(720),N=n(382),F=n(7184),q=n(860);n(9496),n(465),n(97);function W(e){var t=e.backgroundColor,n=e.iconColor,r=e.name,i=e.onClick;return(0,y.tZ)(q.ZP,{animation:"shift-away",content:(0,y.tZ)("bdi",{children:r}),delay:[0,200],hideOnClick:!1,inertia:!0,theme:"light-border",css:[_.v.semibold,"font-size:13px;",""],children:(0,y.tZ)("button",{type:"button","aria-label":r,css:[h.d$,"width:23px;height:29px;& svg{transition:transform .1s;}&:hover svg, &:focus svg{transform:scale(1.2);}&:active svg{transform:scale(1);}",""],onClick:i,children:(0,y.BX)("svg",{width:"23",height:"29",viewBox:"0 0 23 29",children:[(0,y.BX)("defs",{children:[(0,y.tZ)("path",{id:"chapter-background-path",d:"M11.56 1a8.27 8.27 0 0 1 6.92 12.8l-7.25 11.06-6.84-10.89A8.47 8.47 0 0 1 11.56 1z"}),(0,y.BX)("filter",{id:"chapter-filter",width:"146.5%",height:"146.1%",x:"-23.3%",y:"-14.7%",filterUnits:"objectBoundingBox",children:[(0,y.tZ)("feOffset",{dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}),(0,y.tZ)("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"1.5"}),(0,y.tZ)("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"})]})]}),(0,y.BX)("g",{fill:"none",fillRule:"evenodd",children:[(0,y.tZ)("use",{fill:"#000",xlinkHref:"#chapter-background-path",filter:"url(#chapter-filter)"}),(0,y.tZ)("use",{fill:t,xlinkHref:"#chapter-background-path"}),(0,y.tZ)("path",{fill:n,d:"M9.36 5.44c-.37 0-.67.3-.67.68v8.05c0 .15.17.22.29.12l2.38-2.13c.07-.05.17-.05.22 0l2.38 2.13c.1.1.28.01.28-.12V6.12a.7.7 0 0 0-.68-.68h-4.2z"})]})]})})})}var V=n(5110),G=n(4367),Y=n(29),J=n(7794),$=n.n(J),K=n(7812),Q=n(7);function ee(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e){var t,n,r,i=JSON.parse(function(e){var t=e.trim();if("{"===t[0]&&"}"!==t[t.length-1])return t+"]}";return t}(e));if("string"===typeof i)t=null,n=null,r=[i];else{var a=i;t=a.SR,n=a.SPP,r=a.D}var o,s=[],l=ee(r);try{for(l.s();!(o=l.n()).done;){var c=o.value,u=re((0,Q.$g)(c));s.push.apply(s,(0,K.Z)(u))}}catch(d){l.e(d)}finally{l.f()}return{sampleRate:t,samplesPerPoint:n,data:s}}function re(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n)/255;t.push(r)}return t}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe={networkState:"error",data:[.3]};function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce={name:"1aul495",styles:"position:absolute;left:0;right:0;top:50%;user-select:none"},ue={name:"1wl4rzi",styles:"display:flex;position:absolute;transform:translate(-50%, -100%)"};function de(e){var t=e.chapters,n=e.dataUrl,r=e.state,o=e.dispatch,l=e.onSideEffect,c=e.hasArtworkBackground,d=(0,H.n)(),p=(0,u.j)(),f=function(e){var t=s.useState({networkState:"loading",data:[]}),n=(0,a.Z)(t,2),r=n[0],i=n[1];return s.useEffect((function(){if(e){i((function(e){return ae(ae({},e),{},{networkState:"loading"})}));var t=!1,n=function(){var n=(0,Y.Z)($().mark((function n(){var r,a,o;return $().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return a=n.sent,n.next=6,a.text();case 6:r=n.sent,n.next=15;break;case 9:if(n.prev=9,n.t0=n.catch(0),!t){n.next=13;break}return n.abrupt("return");case 13:return i(oe),n.abrupt("return");case 15:if(!t){n.next=17;break}return n.abrupt("return");case 17:n.prev=17,o=ne(r),n.next=25;break;case 21:return n.prev=21,n.t1=n.catch(17),i(oe),n.abrupt("return");case 25:i({networkState:"loaded",data:o.data});case 26:case"end":return n.stop()}}),n,null,[[0,9],[17,21]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){t=!0}}i(oe)}),[e]),r}(n),v=f.networkState,m=f.data,g=s.useState(null),b=(0,a.Z)(g,2),w=b[0],S=b[1],k=s.useState(null),_=(0,a.Z)(k,2),C=_[0],Z=_[1],P=s.useState(0),O=(0,a.Z)(P,2),x=O[0],E=O[1],T=(0,N.oo)({containerElement:w,state:r,onSideEffect:l}).calculateSeekRatio,A=s.useState(null),M=(0,a.Z)(A,2),I=M[0],D=M[1],U=s.useRef(null),j=s.useRef(null),B=c?G.O.white:p.colorForeground,R=p.colorHighlight,L=c?G.O.white:p.colorBackground,z=p.colorHighlightInvert,X=s.useRef({baseWaveformColor:L,data:m,overlayWaveformColor:z});s.useEffect((function(){var e,t,n,r;X.current.baseWaveformColor=L,X.current.data=m,X.current.overlayWaveformColor=z,null===(e=U.current)||void 0===e||e.updateColor(L),null===(t=U.current)||void 0===t||t.updateData(m),null===(n=j.current)||void 0===n||n.updateColor(z),null===(r=j.current)||void 0===r||r.updateData(m)}),[L,m,z]),s.useEffect((function(){if(C&&I){var e={barWidthPx:3,barSpacingPx:2,roundedRadius:1.5,widthPx:C.offsetWidth,heightPx:C.offsetHeight},t=new F.Waveform(le(le({},e),{},{parentNode:C,barColor:X.current.baseWaveformColor}),X.current.data);U.current=t;var n=new F.Waveform(le(le({},e),{},{parentNode:I,barColor:X.current.overlayWaveformColor}),X.current.data);j.current=n,E(C.offsetWidth);window.addEventListener("resize",(function(){var e=C.offsetWidth,r=C.offsetHeight;t.resizeTo(e,r),n.resizeTo(e,r),E(e)}))}}),[C,I]),s.useEffect((function(){var e=function(){document.hidden&&o({type:"documentHidden"})};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[o]);var q=d.clipDuration>0?d.clipCurrentTime/d.clipDuration*100:0,J=100*(0,N.eh)(r,d).ratio,K=s.useMemo((function(){return q>99.999?x+20:x*q/100+10}),[x,q]),Q=s.useMemo((function(){return t?t.map((function(e){var t=(0,V.e)(e.Position),n=(0,V.F)(t);return{id:e.Id,name:e.Name,positionSeconds:n}})):[]}),[t]);return(0,y.BX)("div",{ref:S,dir:"ltr",css:(0,i.iv)({flex:1,transition:"opacity 333ms",position:"relative",margin:"0 ".concat(10,"px"),cursor:"pointer"},"",""),style:{opacity:"loading"!==v?"1":"0"},onContextMenu:function(e){switch(r.state.type){case"idle":case"overChapter":case"overWaveform":break;case"seeking":e.preventDefault()}},children:[(0,y.BX)("div",{css:(0,i.iv)({borderRadius:999,position:"absolute",overflow:"hidden",top:0,right:-10,bottom:0,left:-10,transform:"translateZ(0)"},"",""),children:[(0,y.tZ)(pe,{background:B}),(0,y.tZ)(fe,{isPlaying:"playing"===d.playState.type,background:R,width:K})]}),(0,y.tZ)("div",{ref:Z,css:(0,i.iv)({position:"absolute",top:4,right:0,bottom:4,left:0,whiteSpace:"nowrap",overflow:"hidden",opacity:.4},"","")}),(0,y.tZ)("div",{ref:D,css:(0,i.iv)({position:"absolute",top:4,right:0,bottom:4,left:0,whiteSpace:"nowrap",overflow:"hidden"},"",""),style:{width:"".concat(J,"%")}}),(0,y.tZ)("div",{css:[h.v8,"touch-action:none;user-select:none;",""],onPointerEnter:function(e){o({type:"waveformPointerEnter",ratio:T(e),isPrimary:e.isPrimary})},onPointerLeave:function(e){o({type:"waveformPointerLeave",ratio:T(e),isPrimary:e.isPrimary})},onPointerDown:function(e){e.preventDefault(),0===e.button&&e.currentTarget.setPointerCapture(e.pointerId);var t=e.pointerId,n=e.currentTarget;o({type:"waveformPointerDown",ratio:T(e),isPrimary:e.isPrimary,button:e.button,releasePointer:function(){n.releasePointerCapture(t)}})},onLostPointerCapture:function(e){o({type:"waveformPointerLost",ratio:T(e),isPrimary:e.isPrimary})},onPointerUp:function(e){o({type:"waveformPointerUp",ratio:T(e),isPrimary:e.isPrimary,button:e.button})},onPointerMove:function(e){o({type:"waveformPointerMove",ratio:T(e),isPrimary:e.isPrimary})},onPointerCancel:function(e){o({type:"waveformPointerCancel",ratio:T(e),isPrimary:e.isPrimary})}}),Q.length>0?(0,y.tZ)("div",{css:ce,children:Q.map((function(e){var t=e.positionSeconds/d.clipDuration;return(0,y.tZ)("span",{css:ue,style:{left:"".concat(100*t,"%")},onPointerOver:function(n){o({type:"chapterPointerOver",ratio:T(n),chapterRatio:t,chapterSeconds:e.positionSeconds,isPrimary:n.isPrimary})},onPointerLeave:function(n){o({type:"chapterPointerLeave",ratio:T(n),chapterRatio:t,chapterSeconds:e.positionSeconds,isPrimary:n.isPrimary})},children:(0,y.tZ)(W,{backgroundColor:p.colorHighlight,iconColor:p.colorHighlightInvert,name:e.name,onClick:function(n){o({type:"chapterClick",ratio:T(n),chapterRatio:t,chapterSeconds:e.positionSeconds,isPrimary:!0})}})},e.id)}))}):null]})}function pe(e){var t=e.background;return(0,y.tZ)("div",{css:[h.v8,"opacity:0.35;",""],style:{background:t}})}function fe(e){var t=e.isPlaying,n=e.background,r=e.width;return(0,y.tZ)("div",{css:[h.v8,"transition:opacity 333ms;will-change:opacity, width;",""],style:{opacity:t?1:0,background:n,width:r}})}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e){var t=e.directoryLinks,n=e.withContent,r=e.onSetOverlay,o=(0,u.j)(),l=(0,H.n)(),c=(0,N.mQ)(),d=(0,a.Z)(c,2),p=d[0],f=d[1],h=(0,N.eh)(p,l),v=s.useMemo((function(){return(0,L.R)(h.timeSeconds)}),[h.timeSeconds]),m=s.useMemo((function(){return(0,L.R)(l.clipDuration)}),[l.clipDuration]);s.useEffect((function(){var e=function(e){if("Space"===e.code||23===e.keyCode){if(document.activeElement&&!document.activeElement.isEqualNode(document.body))return;e.preventDefault(),l.togglePlayback()}};return window.addEventListener("keypress",e),function(){return window.removeEventListener("keypress",e)}}),[l]);var g={directoryLinks:t,onSetOverlay:r,clipDurationHumanDuration:m,playTimeHumanDuration:v,waveformDispatch:f,waveformState:p,hasArtworkBackground:"Cover"===o.embedStyle&&o.showImage},b=s.useMemo((function(){switch(o.embedSize){case"Square":return n?{flex:"0 0 100vw",maxHeight:"100%"}:{flex:"1 1 100%"};case"Wide":return{}}}),[o.embedSize,n]),w=b.flex,S=b.maxHeight;return(0,y.tZ)("div",{css:(0,i.iv)({color:o.colorForeground,display:"flex",flex:w,flexDirection:"column",maxHeight:S,position:"relative",width:"100%"},"",""),children:(0,y.tZ)("div",{css:(0,i.iv)({display:"flex",flex:"1 0 auto",padding:Me},"",""),children:function(){switch(o.embedSize){case"Wide":return(0,y.tZ)(He,ye({},g));case"Square":return(0,y.tZ)(Ye,ye({},g))}}()})})}var me=(0,o.Z)("div",{target:"ee1op6u0"})({name:"iosaxw",styles:"left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)"}),ge=function(e){var t=e.direction,n=e.playing,r=e.children;return(0,y.tZ)("div",{css:[_.v.semibold,{opacity:.7,fontSize:"14px",lineHeight:1.7,transform:"translateY(15px)",width:0,textShadow:h.XC},n&&{transform:"translateY(0)",transition:"transform 1300ms "+h.oB},"",""],children:(0,y.tZ)("span",{css:(0,i.iv)({display:"inline-block",transform:"end"===t?"translateX(-100%)":void 0},"",""),children:r})})},be={name:"j7x8gr",styles:"display:flex;height:24px;position:relative"},we={name:"1cme2uv",styles:"align-self:center;white-space:nowrap"},Se=function(e){var t=e.directoryLinks,n=e.onSetOverlay,a=e.hasTextShadow,o=(0,l.Y)(),s=(0,u.j)(),d=(0,f.ql)().intl;return(0,y.BX)("div",{css:be,children:[s.showImage&&"Wide"===s.embedSize&&(0,y.BX)("div",{css:(0,i.iv)((0,r.Z)({display:"none"},Ie,{display:"flex"}),"",""),children:[(0,y.tZ)("img",{css:[{width:32,height:32,display:"block",position:"relative",top:-4},"",""],src:(0,z.Hn)(o.ImageUrl,"thumbnail"),alt:""}),(0,y.tZ)(S.g,{width:12})]}),s.showProgram?(0,y.tZ)("span",{css:[h.FF,"flex:auto;overflow:hidden;",h.L2,"",""],children:(0,y.tZ)("bdi",{css:[_.v.semibold,"font-size:14px;line-height:1.7;opacity:0.7;",a?{textShadow:h.XC}:void 0,"",""],title:o.Program.Name,children:o.Program.Name})}):null,(0,y.tZ)(S.g,{}),(0,y.tZ)(S.g,{width:10}),(0,y.BX)("div",{css:we,children:[s.showDescription&&(0,y.tZ)(c._c,{type:"round",title:d.formatMessage({id:"f7FE6P",defaultMessage:[{type:0,value:"Info"}]}),onClick:function(){n({type:"info"})},children:(0,y.tZ)(p.aU,{height:"28px"})}),s.showFollow&&t&&(0,y.BX)(y.HY,{children:[(0,y.tZ)(S.g,{width:7}),(0,y.tZ)(c._c,{type:"round",title:d.formatMessage({id:"3CeZpk",defaultMessage:[{type:0,value:"Follow"}]}),onClick:function(){n({type:"follow",directoryLinks:t})},children:(0,y.tZ)(p.RN,{height:"28px"})})]}),s.showShare&&(0,y.BX)(y.HY,{children:[(0,y.tZ)(S.g,{width:7}),(0,y.tZ)(c._c,{type:"round",title:d.formatMessage({id:"bhBzw0",defaultMessage:[{type:0,value:"Share"}]}),onClick:function(){n({type:"share"})},children:(0,y.tZ)(p.FO,{height:"28px",css:h.bT})})]})]})]})},ke={name:"20xy69",styles:"font-size:18px;height:1.7em;line-height:1.7;position:relative"},_e=function(e){var t=e.hasTextShadow,n=(0,l.Y)();return(0,y.tZ)("div",{css:ke,children:(0,y.tZ)(x,{clip:n,hasTextShadow:t})})},Ce={name:"om3woq",styles:"@media (max-width: 280px){width:32px;height:32px;}"},Ze=function(){var e=(0,u.j)(),t=(0,H.n)(),n=(0,f.ql)().intl;return(0,y.tZ)(X.Q6,{in:!t.hasPlayed,containerElem:me,timeout:X.Is,unmountOnExit:!0,children:(0,y.tZ)("button",{css:[h.d$,{background:e.lightPlay?"rgba(255,255,255,0.3)":e.colorHighlight,color:e.colorHighlightInvert,borderRadius:"50%",transition:"transform 0.1s",height:80,width:80,boxShadow:"0 7px 24px 6px rgba(0,0,0,0.4)",position:"relative","&:hover, &:focus":{transform:"scale(1.1)"},"&:active":{transform:"scale(1.05)",boxShadow:"0 3px 12px 6px rgba(0,0,0,0.4)"},"@media (max-width: 280px)":{width:60,height:60}},"",""],type:"button",title:n.formatMessage({id:"U0bK/q",defaultMessage:[{type:0,value:"Play"}]}),onClick:function(){return t.play()},children:(0,y.tZ)(p.JF,{width:46,height:46,css:Ce})})})},Pe={name:"s5xdrg",styles:"display:flex;align-items:center"},Oe={name:"1xmhi88",styles:"display:block;width:20px;height:20px"},xe=function(){var e=(0,u.j)(),t=(0,f.ql)().intl;return(0,y.tZ)("div",{css:Pe,children:function(){switch(e.branding.type){case"branded":switch(e.branding.small.type){case"custom":return(0,y.BX)(y.HY,{children:[(0,y.tZ)(S.g,{width:12}),(0,y.tZ)("a",{css:[h.PO,"opacity:0.6;&:hover, &:focus{opacity:1;}",""],href:e.branding.small.logoUrl,target:"_blank",rel:"noreferrer",title:e.branding.small.logoTitle,children:(0,y.tZ)("img",{src:e.branding.small.logoImageSrc,css:Oe,alt:e.branding.small.logoTitle})})]});case"none":return null}break;case"omny":return(0,y.BX)(y.HY,{children:[(0,y.tZ)(S.g,{width:12}),(0,y.tZ)("a",{css:[h.PO,"font-size:20px;opacity:0.6;&:hover, &:focus{opacity:1;}",""],href:(0,R.K5)("omnyCmsBaseUrl")+"/learn/?utm_source=omnyfm-embed&utm_medium=overlay",target:"_blank",rel:"noreferrer",title:t.formatMessage({id:"GQjAJn",defaultMessage:[{type:0,value:"Powered by Omny Studio"}]}),children:(0,y.tZ)(p.PI,{})})]})}}()})},Ee=function(e){var t=e.waveformState,n=e.waveformDispatch,r=e.hasArtworkBackground,i=(0,H.n)(),a=(0,l.Y)(),o=s.useCallback((function(e){switch(e.type){case"releasePointer":e.releasePointer();break;case"seekRatio":i.seek(i.clipDuration*e.ratio);break;case"seekTime":i.seek(e.timeSeconds)}}),[i]);return(0,y.tZ)(de,{chapters:a.Chapters,dataUrl:a.WaveformUrl,state:t,dispatch:n,onSideEffect:o,hasArtworkBackground:r})},Te=function(e){var t=e.className,n=(0,H.n)(),r=(0,f.ql)().intl;return(0,y.tZ)(c.qM,{title:r.formatMessage({id:"2QLhAF",defaultMessage:[{type:0,value:"Rewind 15 seconds"}]}),onClick:function(){return n.seekBackward(15)},className:t,children:(0,y.tZ)(p.q8,{})})},Ae=function(e){var t=e.className,n=(0,H.n)(),r=(0,f.ql)().intl;return(0,y.tZ)(c.qM,{title:r.formatMessage({id:"/zbFqk",defaultMessage:[{type:0,value:"Skip 15 seconds"}]}),onClick:function(){return n.seekForward(15)},className:t,children:(0,y.tZ)(p.Yn,{})})},Me=12,Ie="@media (max-width: ".concat(580,"px)"),De=(0,i.iv)({width:"calc(100vh - ".concat(2*Me,"px)"),height:"calc(100vh - ".concat(2*Me,"px)")},"",""),Ue={name:"rl0252",styles:"padding:4px;line-height:1;font-size:20px;margin:-4px 4px 0 4px;vertical-align:middle"},je={name:"13budfd",styles:"width:100%;height:100%;display:block"},Be={name:"5novwk",styles:"display:flex;flex:1 0;flex-direction:column;min-width:0"},Re={name:"fr763q",styles:"align-items:center;display:flex;flex:1 0;position:relative"},Le={name:"1cvxyzz",styles:"display:flex;flex:1 0;flex-direction:column"},ze={name:"ra0owt",styles:"display:flex;height:36px"},He=function(e){var t=e.directoryLinks,n=e.onSetOverlay,i=e.playTimeHumanDuration,a=e.clipDurationHumanDuration,o=e.waveformDispatch,s=e.waveformState,c=e.hasArtworkBackground,d=(0,u.j)(),p=(0,l.Y)(),f=(0,H.n)();return(0,y.BX)(y.HY,{children:[(0,y.BX)("div",{css:[(0,r.Z)({display:"flex"},Ie,{visibility:"hidden",width:0}),d.showImage?null:{visibility:"hidden",width:0},"",""],children:[(0,y.tZ)("div",{css:[De,"max-height:156px;max-width:156px;display:block;",""],children:d.showImage?(0,y.tZ)("img",{css:je,src:(0,z.Hn)(p.ImageUrl,"small"),alt:p.Title}):null}),(0,y.tZ)(S.g,{width:12})]}),(0,y.BX)("div",{css:Be,children:[(0,y.tZ)(Se,{directoryLinks:t,onSetOverlay:n,hasTextShadow:c}),(0,y.BX)("div",{css:Re,children:[(0,y.tZ)(w,{playState:f.playState,buffering:f.buffering,size:"Wide",onClick:function(){return f.togglePlayback()}}),(0,y.tZ)(S.g,{width:10}),(0,y.BX)("div",{css:Le,children:[(0,y.tZ)(_e,{hasTextShadow:c}),(0,y.BX)("div",{dir:"ltr",css:[_.v.semibold,'height:1.7em;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap;[dir="rtl"] &{text-align:right;}',h.L2,"",""],children:[(0,y.tZ)(X.Ik,{in:f.hasPlayed,children:(0,y.tZ)(Te,{css:Ue})}),(0,y.BX)("span",{css:["opacity:0.7;font-size:14px;line-height:1.7;vertical-align:top;",c?{textShadow:h.XC}:void 0,"",""],children:[i,"\xa0/\xa0",a]}),(0,y.tZ)(X.Ik,{in:f.hasPlayed,children:(0,y.tZ)(Ae,{css:Ue})})]})]})]}),(0,y.BX)("div",{css:ze,children:[(0,y.tZ)(Ee,{waveformState:s,waveformDispatch:o,hasArtworkBackground:c}),(0,y.tZ)(xe,{})]})]})]})},Xe={name:"1je511w",styles:"flex:1 0;line-height:1;font-size:28px;position:relative;text-align:center;@media (max-width: 280px){display:none;}"},Ne={name:"5novwk",styles:"display:flex;flex:1 0;flex-direction:column;min-width:0"},Fe={name:"mkp8hv",styles:"flex:1 0;margin-top:5px"},qe={name:"1cxrgdk",styles:"height:50px;margin-bottom:10px;display:flex;align-items:center"},We={name:"2x17dn",styles:"flex:1 0"},Ve={name:"bd5oz8",styles:"display:flex;justify-content:center;margin:0 auto;max-width:190px"},Ge={name:"ra0owt",styles:"display:flex;height:36px"},Ye=function(e){var t=e.directoryLinks,n=e.onSetOverlay,r=e.playTimeHumanDuration,i=e.clipDurationHumanDuration,a=e.waveformDispatch,o=e.waveformState,s=e.hasArtworkBackground,l=(0,H.n)();return(0,y.BX)(y.HY,{children:[(0,y.BX)("div",{css:Ne,children:[(0,y.tZ)(Se,{directoryLinks:t,onSetOverlay:n,hasTextShadow:s}),(0,y.tZ)("div",{css:Fe,children:(0,y.tZ)(_e,{hasTextShadow:s})}),(0,y.BX)("div",{dir:"ltr",css:qe,children:[(0,y.tZ)(ge,{direction:"start",playing:l.hasPlayed,children:r}),(0,y.tZ)("div",{css:We,children:(0,y.tZ)(X.up,{in:l.hasPlayed,timeout:1300,mountOnEnter:!0,children:(0,y.BX)("div",{css:Ve,children:[(0,y.tZ)(Te,{css:Xe}),(0,y.tZ)(w,{playState:l.playState,buffering:l.buffering,size:"Square",onClick:function(){return l.togglePlayback()}}),(0,y.tZ)(Ae,{css:Xe})]})})}),(0,y.tZ)(ge,{direction:"end",playing:l.hasPlayed,children:i})]}),(0,y.BX)("div",{css:Ge,children:[(0,y.tZ)(Ee,{waveformState:o,waveformDispatch:a,hasArtworkBackground:s}),(0,y.tZ)(xe,{})]})]}),(0,y.tZ)(Ze,{})]})}},6087:function(e,t,n){n.d(t,{a:function(){return i}});var r=n(5944);function i(e){var t=e.color,n=e.size,i=void 0===n?"1em":n,a=e.children,o=e.opacity,s=e.verticalAlign,l=void 0===s?"middle":s;return(0,r.tZ)("span",{css:[{color:t,"& svg":{verticalAlign:l,width:i,height:i,opacity:o}},"",""],children:a})}},166:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(917),i=n(2165),a=n(5944);function o(e){var t=e.clip;return(0,a.tZ)("div",{css:(0,r.iv)({backgroundImage:"url(".concat((0,i.Hn)(t.ImageUrl,"thumbnail"),")"),backgroundPosition:"50% 50%",backgroundSize:"cover",bottom:"-20px",filter:"blur(20px)",left:"-20px",position:"absolute",right:"-20px",top:"-20px"},"","")})}},2966:function(e,t,n){n.d(t,{SR:function(){return m},Uw:function(){return b},VR:function(){return S},i1:function(){return g},tI:function(){return w},uO:function(){return C}});var r=n(917),i=n(6835),a=n(7294),o=n(4012),s=n(7474),l=n(6087),c=n(5413),u=n(5988),d=n(9086),p=n(7138),f=n(4367),h=n(6677),y=n(7033),v=n(5944);function m(e){var t=e.children;return(0,v.tZ)(c.T,{children:(0,v.tZ)("div",{css:[h.v8,{background:f.O.grey1,color:f.O.grey3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},"",""],children:t})})}function g(){return(0,v.tZ)(b,{children:(0,v.tZ)(p.Uc,{})})}function b(e){var t=e.children;return(0,v.tZ)(l.a,{size:28,opacity:.5,children:t})}function w(e){var t=e.children;return(0,v.tZ)("p",{css:[y.v.semibold,"font-size:14px;line-height:1.7;",""],children:t})}function S(){var e=a.useState(!1),t=(0,i.Z)(e,2),n=t[0],r=t[1];return(0,v.tZ)(C,{showSpinner:n,onClick:function(){window.location.reload(),r(!0)}})}var k={name:"1mjg5st",styles:"margin-top:8px;position:relative"},_={name:"1eg0rk6",styles:"width:18px;height:18px"};function C(e){var t=e.showSpinner,n=e.onClick;return(0,v.BX)("div",{css:k,children:[(0,v.tZ)("div",{css:(0,r.iv)({visibility:t?"hidden":void 0},"",""),children:(0,v.BX)("button",{type:"button",css:[h.d$,s.D6,"",""],disabled:t,onClick:n,children:[(0,v.tZ)(p.Pe,{css:_}),(0,v.tZ)(u.g,{width:4}),(0,v.tZ)(o.Z,{id:"B/n8XI",defaultMessage:[{type:0,value:"Try again"}]})]})}),t?(0,v.tZ)("div",{css:[h.v8,h.wm,"",""],children:(0,v.tZ)(d.$,{})}):null]})}},7129:function(e,t,n){n.d(t,{v:function(){return C}});var r=n(917),i=n(9008),a=n.n(i),o=n(7294),s=n(4298),l=n.n(s),c=n(5944);function u(e){return e.config.customGATrackingId?(0,c.tZ)(l(),{id:"google-analytics",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:d}}):null}var d='\n(function (i, s, o, g, r, a, m) {\n    i["GoogleAnalyticsObject"] = r;\n    (i[r] =\n        i[r] ||\n        function () {\n            (i[r].q = i[r].q || []).push(arguments);\n        }),\n        (i[r].l = 1 * new Date());\n    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);\n    a.async = 1;\n    a.src = g;\n    m.parentNode.insertBefore(a, m);\n})(\n    window,\n    document,\n    "script",\n    "https://www.google-analytics.com/analytics.js",\n    "ga"\n);\n',p=n(4492),f=n(7147),h=n(3734),y=n(4012),v=n(2966);function m(e){var t=e.children;return(0,c.tZ)(h.SV,{fallback:g,children:t})}function g(e){var t=e.resetError;return(0,c.BX)(v.SR,{children:[(0,c.tZ)(v.i1,{}),(0,c.tZ)(v.tI,{children:(0,c.tZ)(y.Z,{id:"hze1Yr",defaultMessage:[{type:0,value:"An error occurred"}]})}),(0,c.tZ)(v.uO,{onClick:t})]})}var b=n(5413),w=n(7327),S=n(8125),k=function(e){o.useEffect((function(){var t=(0,S.M)();if("browser"===t.type&&"embedly"===t.parent&&"Wide"===e.embedSize){var n=e.showTranscript?w.TT.wideClipTranscriptDefault:w.TT.wideClipDefault,r=function(){!function(e){window.parent.postMessage(JSON.stringify({src:window.location.toString(),context:"iframe.resize",height:e}),"*")}(n)};return r(),window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}}}),[e.embedSize,e.showTranscript])},_=n(6453);function C(e){var t=e.clip,n=e.config,i=e.grow,o=e.metadata,s=e.player,l=e.children;return k(n),(0,c.BX)(m,{children:[(0,c.BX)(a(),{children:[(0,c.tZ)("meta",{name:"robots",content:"noindex"}),(0,c.tZ)("title",{children:o.title})]}),(0,c.BX)(f.l,{config:n,children:[(0,c.tZ)(u,{config:n}),(0,c.tZ)(p.i,{clip:t,children:(0,c.tZ)(_.I,{player:s,children:(0,c.tZ)(b.T,{children:(0,c.tZ)("div",{css:(0,r.iv)({position:"absolute",height:i||"Square"===n.embedSize?"100%":void 0,width:"100%",display:"flex",flexDirection:"column"},"",""),style:{backgroundColor:n.colorBackground},children:l})})})})]})]})}},7:function(e,t,n){n.d(t,{$g:function(){return r},An:function(){return i}});n(8764).Buffer;function r(e){return window.atob(e)}function i(e,t){var n=window.btoa(e);return t.urlSafe?n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):n}},8125:function(e,t,n){n.d(t,{M:function(){return r}});var r=function(){if("undefined"===typeof document)return{type:"node"};var e=function(){if(document.referrer.includes("embedly.com"))return"embedly";if(document.referrer.includes("omny.fm"))return"omnyfm";return"other"}();return{type:"browser",url:document.URL,parent:e,referrer:"embedly"===e?i(document):document.referrer}};function i(e){var t;return null!==(t=new URL(e.URL).searchParams.get("referrer"))&&void 0!==t?t:e.referrer}},5110:function(e,t,n){n.d(t,{F:function(){return o},e:function(){return a}});var r=n(8534),i=n(8598);function a(e){var t=e.match(/(-)?(\d\.)?(\d{2}):(\d{2}):(\d{2})(\.(\d{7}))?/);if(!t)throw Error("Invalid time span");var n="-"===t[1]?"negative":"positive",r=t[2]?parseInt(t[2]):0;if(r<0||r>9)throw Error("Invalid time span days ".concat(r,")"));var i=parseInt(t[3]);if(i<0||i>23)throw Error("Invalid time span hours ".concat(i,")"));var a=parseInt(t[4]);if(a<0||a>59)throw Error("Invalid time span minutes ".concat(a,")"));var o=parseInt(t[5]);if(o<0||o>59)throw Error("Invalid time span seconds ".concat(o,")"));var s=t[7]?parseInt(t[7]):0;if(s<0||s>9999999)throw Error("Invalid time span fractionalPortionSecond ".concat(s,")"));return{sign:n,days:r,hours:i,minutes:a,seconds:o,fractionalPortionSecond:s}}function o(e){var t=0;return t+=e.fractionalPortionSecond/1e7,t+=e.seconds,t+=(0,r.Z)(e.minutes),t+=(0,i.Z)(e.hours),t+=(0,i.Z)(24*e.days),"negative"===e.sign&&(t=-t),t}},6845:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(4932);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n){var a,o=[],s=i(n);try{for(s.s();!(a=s.n()).done;){var l=a.value;"PublishedUtc"!==l||void 0!==e[l]&&null!==e[l]?void 0!==e[l]&&null!==e[l]||o.push(String(l)):(0,r.H)("".concat(t,' "').concat(e.Slug,'" missing PublishedUtc'))}}catch(u){s.e(u)}finally{s.f()}if(o.length>0){var c=o.map((function(e){return'"'.concat(e,'"')})).join(", ");throw Error("".concat(t,' "').concat(e.Slug,'" missing keys ').concat(c))}return e}},1199:function(e,t,n){n.d(t,{c:function(){return p}});var r=n(29),i=n(6835),a=n(7794),o=n.n(a),s=n(7294),l=n(4932);function c(e){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!navigator.clipboard){e.next=12;break}return e.prev=2,e.next=5,navigator.clipboard.writeText(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),d(t);case 10:e.next=17;break;case 12:if(!window.clipboardData){e.next=16;break}return e.abrupt("return",window.clipboardData.setData("Text",t));case 16:d(t);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(0),(0,l.H)("copyToClipboard exception: "+e.t1),e.abrupt("return",!1);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,null,[[0,19],[2,7]])})))).apply(this,arguments)}function d(e){var t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",t.style.webkitUserSelect="auto",t.style.userSelect="all",document.body.appendChild(t);var n=window.getSelection();if(!n)throw Error("window.getSelection() returned null");var r=window.document.createRange();n.removeAllRanges(),r.selectNode(t),n.addRange(r);try{window.document.execCommand("copy")}catch(i){throw i}finally{n.removeAllRanges(),window.document.body.removeChild(t)}}function p(){var e=s.useState("idle"),t=(0,i.Z)(e,2),n=t[0],a=t[1],l=s.useRef(-1);s.useEffect((function(){return function(){window.clearTimeout(l.current)}}),[]);var u=s.useCallback(function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.clearTimeout(l.current),a("copying"),e.next=4,c(t);case 4:if(e.sent){e.next=8;break}return a("idle"),e.abrupt("return");case 8:a("success"),l.current=window.setTimeout((function(){a("idle")}),3e3);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return{clipboardState:n,copyTextToClipboard:u}}},6577:function(e,t,n){n.d(t,{G:function(){return a}});var r=n(6835),i=n(7294);function a(e){var t=i.useState(null),n=(0,r.Z)(t,2),a=n[0],o=n[1];return i.useEffect((function(){o(document.createElement("div"))}),[]),i.useMemo((function(){if(!a)return e;a.innerHTML=e;for(var t=a.querySelectorAll("a"),n=0;n<t.length;n++)t[n].rel="nofollow",t[n].target="_blank";return a.innerHTML}),[a,e])}},5614:function(e,t,n){n.d(t,{U:function(){return o}});var r=n(6835),i=n(7294),a={type:"none"},o=function(){var e=i.useState(a),t=(0,r.Z)(e,2),n=t[0],o=t[1];return{overlayState:n,setOverlay:function(e){o(e)},closeOverlay:function(){o(a)}}}},2174:function(e,t,n){n.d(t,{Y:function(){return N}});var r=n(6835),i=n(29),a=n(2777),o=n(2262),s=n(9499),l=n(7794),c=n.n(l),u=n(2070),d=n(9241);function p(){}var f=n(6709),h=n(9e3),y=n(8820);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w={currentTime:0,duration:null,isBuffering:!1,isPlaying:!1},S=function(){function e(){(0,a.Z)(this,e),(0,s.Z)(this,"_allMedia",void 0),(0,s.Z)(this,"_mediaByMediaType",void 0),(0,s.Z)(this,"_state",{type:"none"}),(0,s.Z)(this,"_videoElement",void 0),(0,s.Z)(this,"_onAdComplete",(0,y._)()),(0,s.Z)(this,"_onAdRejected",(0,y._)()),(0,s.Z)(this,"_onMediaStateChange",(0,y._)()),(0,s.Z)(this,"_onPause",(0,y._)()),(0,s.Z)(this,"_onPlay",(0,y._)());var t="undefined"!==typeof document?document.createElement("audio"):null,n="undefined"!==typeof document?document.createElement("video"):null;n&&(n.playsInline=!0),this._mediaByMediaType={audio:t?new h.P3(t):new h.Wk,video:n?new h.P3(n):new h.Wk},this._allMedia=Object.values(this._mediaByMediaType),this._addMediaObservables("audio",this._mediaByMediaType.audio),this._addMediaObservables("video",this._mediaByMediaType.video),this._videoElement=n}return(0,o.Z)(e,[{key:"muted",get:function(){var e=this._getState();return this._mediaByMediaType[e.type].muted},set:function(e){var t,n=g(this._allMedia);try{for(n.s();!(t=n.n()).done;){t.value.muted=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"mediaState",get:function(){var e=this._state;switch(e.type){case"none":return w;case"audio":case"video":return e.mediaState}}},{key:"videoElement",get:function(){return this._videoElement}},{key:"volume",get:function(){var e=this._getState();return this._mediaByMediaType[e.type].volume},set:function(e){var t,n=g(this._allMedia);try{for(n.s();!(t=n.n()).done;){t.value.volume=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"adChange",value:function(e){var t,n=e.adData,r=e.adProviderType,i=e.clip,a=this._mediaByMediaType[n.type],o=new u.tracker(n.ad,n.creative,null===(t=n.companion)||void 0===t?void 0:t.creative);this._state={type:n.type,hasTrackedImpression:!1,mediaState:w,tracker:o,trackImpression:function(){!function(e){var t=e.adData,n=e.adProviderType,r=e.clip,i=(0,f.l)(),a=function(){switch(n){case"Triton":var e,t;return null===(e=r.Program)||void 0===e||null===(t=e.AdConfig)||void 0===t?void 0:t.ConfigTriton;case"Vast":var i,a;return null===(i=r.Program)||void 0===i||null===(a=i.AdConfig)||void 0===a?void 0:a.ConfigVast}}();i.postImpression({AdAudioUrl:t.mediaFile.fileURL,AdClickThroughUrl:t.creative.videoClickThroughURLTemplate,AdId:t.ad.id,AdProviderConfiguration:JSON.stringify(a),AdProviderType:n,AdTitle:t.ad.title,ClipId:r.Id,OrganizationId:r.OrganizationId})}({adData:n,adProviderType:r,clip:i})}},o.on("clickthrough",(function(e){var t=window.open(e,"_blank");t&&(t.opener=null)})),o.load(),a.setSrc(n.mediaFile.fileURL,"Advertisement"),a.play(-1)}},{key:"adClick",value:function(){this._getState().tracker.click()}},{key:"adSkip",value:function(){var e=this._getState();e.tracker.skip(),this._mediaByMediaType[e.type].pause(),this._adComplete(e.type)}},{key:"bless",value:function(){var e,t=g(this._allMedia);try{for(t.s();!(e=t.n()).done;){e.value.bless()}}catch(n){t.e(n)}finally{t.f()}}},{key:"pause",value:function(){var e=this._getState();this._mediaByMediaType[e.type].pause()}},{key:"play",value:function(){var e=this._getState();this._mediaByMediaType[e.type].play(-1)}},{key:"onAdComplete",get:function(){return this._onAdComplete.observe}},{key:"onAdRejected",get:function(){return this._onAdRejected.observe}},{key:"onMediaStateChange",get:function(){return this._onMediaStateChange.observe}},{key:"onPause",get:function(){return this._onPause.observe}},{key:"onPlay",get:function(){return this._onPlay.observe}},{key:"_addMediaObservables",value:function(e,t){var n=this;t.onAction((function(t){var r=n._state;if(r.type===e)switch(t.type){case"ended":r.tracker.complete(),n._adComplete(r.type);break;case"error":r.tracker.errorWithCode("405"),n._mediaByMediaType[r.type].pause(),n._adComplete(r.type);break;case"loadedMetadata":r.mediaState=m(m({},r.mediaState),{},{duration:t.duration}),n._onMediaStateChange.dispatch();break;case"pause":r.tracker.setPaused(!0),r.mediaState=m(m({},r.mediaState),{},{isPlaying:!1}),n._onMediaStateChange.dispatch(),n._onPause.dispatch();break;case"play":r.tracker.setPaused(!1),r.hasTrackedImpression||(r.hasTrackedImpression=!0,r.trackImpression()),r.mediaState=m(m({},r.mediaState),{},{isPlaying:!0}),n._onMediaStateChange.dispatch(),n._onPlay.dispatch();break;case"playPromiseRejected":n._onAdRejected.dispatch();break;case"timeUpdate":r.tracker.setProgress(t.currentTime),r.mediaState=m(m({},r.mediaState),{},{currentTime:t.currentTime}),n._onMediaStateChange.dispatch()}})),t.onBufferingChange((function(t){var r=n._state;r.type===e&&(r.mediaState=m(m({},r.mediaState),{},{isBuffering:t}),n._onMediaStateChange.dispatch())}))}},{key:"_adComplete",value:function(e){"video"===e&&function(){if(document.exitFullscreen)document.exitFullscreen().catch(p);else if(document.webkitExitFullscreen){var e;null===(e=document.webkitExitFullscreen())||void 0===e||e.catch(p)}else if(document.mozCancelFullScreen){var t;null===(t=document.mozCancelFullScreen())||void 0===t||t.catch(p)}else if(document.msExitFullscreen){var n;null===(n=document.msExitFullscreen())||void 0===n||n.catch(p)}}(),this._onAdComplete.dispatch()}},{key:"_getState",value:function(e){var t=this._state;switch(t.type){case"none":throw this._videoElement&&console.log("videoElement has parent?",!!this._videoElement.parentElement),Error("attempted to get AdPlayer state while none");case"audio":case"video":if(e&&e!==t.type)throw Error("attempted to get AdPlayer ".concat(e," state when ").concat(t.type));return t}}}]),e}();function k(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e){var t,n=e.adConfiguration,i=e.clip,a=e.embedData,o=e.videoPlayerDimensions;if(!n)return null;var s=(new Date).getTime().toString(),l=function(e,t){if(0===t.length)return e;var n,i="cust_params",a=[],o=C(t);try{for(o.s();!(n=o.n()).done;){var s=(0,r.Z)(n.value,2),l=s[0],c=s[1];if(c){var u=c.replace(/['"=!+#;^()<>[\]]+/g,"");u&&a.push("".concat(l,"=").concat(u))}}}catch(h){o.e(h)}finally{o.f()}if(0===a.length)return e;var d=new URL(e),p=a.join("&"),f=d.searchParams.get(i);f&&(p="".concat(f,"&").concat(p));return d.searchParams.set(i,p),d.toString()}(function(e,t){var n,i=e,a=k(t);try{for(a.s();!(n=a.n()).done;){var o=(0,r.Z)(n.value,2),s=o[0],l=o[1];if(null!==l){var c="["+s+"]",u="%%"+s+"%%",d=encodeURIComponent(l);i=(i=i.replace(c,d)).replace(u,d)}}}catch(p){a.e(p)}finally{a.f()}return i}(n.vastUrl,[["correlator",s],["description_url",null!==(t=i.ShareUrl)&&void 0!==t?t:i.PublishedUrl],["height",o.height.toString()],["output","xml_vast3"],["referrer_url",a.referrer],["timestamp",s],["url",a.referrer],["width",o.width.toString()]]),[["omny_clip_id",i.Id],["omny_clip_title",i.Title],["omny_embed_size",a.embedConfig.embedSize],["omny_embed_style",a.embedConfig.embedStyle],["omny_network_id",i.Program.NetworkId],["omny_organization_id",i.OrganizationId],["omny_playlist_id",a.playlistId],["omny_program_name",i.Program.Name],["omny_program_slug",i.Program.Slug],["omny_type","podcast"]]);return l}var O=n(7812);function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n,r=[],i=[],a=x(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;t(o)?r.push(o):i.push(o)}}catch(s){a.e(s)}finally{a.f()}return[r,i]}var A=n(5110);function M(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return"duringPlayback"===e.type&&e.offsetSeconds>=t&&e.offsetSeconds<=n}function B(e){switch(e.mode.type){case"ad":if(0===e.mode.remainingAds.length){var t=e.mode.adTrigger;return[U(U({},e),{},{mode:{type:"clip"}}),[function(){switch(t){case"autoplay":return{type:"playerAutoplay"};case"ended":return{type:"onClipEnded"};case"playback":return{type:"playerPlay"}}}()]]}var n=e.mode.remainingAds[0],r=e.mode.remainingAds.slice(1),i=e.adCache.get(n.id);return[U(U({},e),{},{mode:U(U({},e.mode),{},{ad:n,adCacheState:null!==i&&void 0!==i?i:{type:"loading"},remainingAds:r})}),void 0===i?[{type:"loadAd",ad:n}]:"loaded"===i.type?[{type:"adChange",ad:n,adData:i.adData}]:[]];case"clip":throw Error("adComplete in clip mode")}}function R(e,t){var n,r=[],i=t+2,a=M(e.allAds);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(!e.adCache.has(o.id)){var s=void 0;switch(o.type){case"firstPlay":s=!0;break;case"duringPlayback":case"end":s=o.offsetSeconds>=t&&o.offsetSeconds<=i}s&&(e.adCache.set(o.id,{type:"loading"}),r.push({type:"loadAd",ad:o}))}}}catch(l){a.e(l)}finally{a.f()}return r}function L(e){return e.sort((function(e,t){return e.id-t.id})),e}function z(e,t,n){switch(e){case"PreRoll":return"firstPlay";case"MidRoll":return"duringPlayback";case"PostRoll":return t<n-2?"duringPlayback":"end"}}function H(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(){function e(t){var n=this,r=t.embedConfig,i=t.player,o=t.initialClip,l=t.firstClipStartTimeSeconds,c=t.playlistId,u=t.referrer;(0,a.Z)(this,e),(0,s.Z)(this,"_adPlayer",new S),(0,s.Z)(this,"_currentClip",void 0),(0,s.Z)(this,"_mountState",{type:"unmounted",autoplayRequested:!1}),(0,s.Z)(this,"_player",void 0),(0,s.Z)(this,"_state",{adCache:new Map,allAds:[],unshownAds:[],mode:{type:"clip"},sessionId:0}),(0,s.Z)(this,"_vastAdProviderEmbedData",void 0),(0,s.Z)(this,"_adMediaStateChangeObservable",(0,y._)()),(0,s.Z)(this,"_bufferingChangeObservable",(0,y._)()),(0,s.Z)(this,"_clipChangeObservable",(0,y._)()),(0,s.Z)(this,"_clipEndObservable",(0,y._)()),(0,s.Z)(this,"_clipTimeUpdateObservable",(0,y._)()),(0,s.Z)(this,"_errorObservable",(0,y._)()),(0,s.Z)(this,"_modeChangeObservable",(0,y._)()),(0,s.Z)(this,"_pauseObservable",(0,y._)()),(0,s.Z)(this,"_playerStateChangeObservable",(0,y._)()),(0,s.Z)(this,"_playObservable",(0,y._)()),(0,s.Z)(this,"_seekBackwardObservable",(0,y._)()),(0,s.Z)(this,"_seekForwardObservable",(0,y._)()),this._player=i,this._vastAdProviderEmbedData={embedConfig:r,playlistId:c,referrer:u},this._currentClip=o,l&&this._player.seek(l);var d=this._adPlayer;d.onAdComplete((function(){n._dispatch({type:"adComplete"})})),d.onAdRejected((function(){n._dispatch({type:"adRejected"})})),d.onMediaStateChange((function(){n._adMediaStateChangeObservable.dispatch()})),d.onPause((function(){n._pauseObservable.dispatch()})),d.onPlay((function(){n._playObservable.dispatch()})),i.onBufferingChange((function(){n._bufferingChangeObservable.dispatch()})),i.onClipEnd((function(){n._dispatch({type:"clipEnded"})})),i.onError((function(e){n._errorObservable.dispatch(e)})),i.onPause((function(){n._pauseObservable.dispatch()})),i.onPlay((function(){n._playObservable.dispatch()})),i.onPlayerStateChange((function(){n._playerStateChangeObservable.dispatch()})),i.onTimeUpdate((function(){n._clipTimeUpdateObservable.dispatch(),n._dispatch({type:"clipTimeUpdate",time:i.currentTime,isPlaying:"playing"===i.playState.type})}))}return(0,o.Z)(e,[{key:"adMediaState",get:function(){return this._adPlayer.mediaState}},{key:"adVideoElement",get:function(){return this._adPlayer.videoElement}},{key:"buffering",get:function(){return this._player.buffering}},{key:"clip",get:function(){return this._currentClip}},{key:"clipCurrentTime",get:function(){return this._player.currentTime}},{key:"clipDuration",get:function(){return this._player.duration}},{key:"isPlaying",get:function(){var e=this._adPlayer,t=this._state.mode,n=this._player;switch(t.type){case"ad":return e.mediaState.isPlaying;case"clip":return"playing"===n.playState.type}}},{key:"mode",get:function(){return this._state.mode}},{key:"muted",get:function(){switch(this._state.mode.type){case"ad":return this._adPlayer.muted;case"clip":return this._player.muted}}},{key:"playState",get:function(){return this._player.playState}},{key:"program",get:function(){return this.clip.Program}},{key:"volume",get:function(){switch(this._state.mode.type){case"ad":return this._adPlayer.volume;case"clip":return this._player.volume}}},{key:"adClick",value:function(){this._adPlayer.adClick()}},{key:"adSkip",value:function(){this._adPlayer.adSkip()}},{key:"autoplay",value:function(){"mounted"===this._mountState.type?this._dispatch({type:"play",fromTime:this._player.currentTime,trigger:"autoplay"}):this._mountState.autoplayRequested=!0}},{key:"mount",value:function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("unmounted"===this._mountState.type){e.next=2;break}return e.abrupt("return");case 2:if(this._mountState.type="mounting",this._adPlayer.videoElement){e.next=5;break}throw Error("attempting to mount without video element");case 5:return e.next=7,q(this._adPlayer.videoElement);case 7:t=this._mountState.autoplayRequested,this._mountState={type:"mounted"},this._player.mount(),this._dispatchSetClip(),t&&this._dispatch({type:"play",fromTime:this._player.currentTime,trigger:"autoplay"});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){var e=this._adPlayer,t=this._state.mode,n=this._player;switch(t.type){case"ad":e.pause();break;case"clip":n.pause()}}},{key:"play",value:function(){var e=this._adPlayer,t=this._player;e.bless(),t.bless(),this._dispatch({type:"play",fromTime:t.currentTime,trigger:"playback"})}},{key:"seek",value:function(e){var t=this._state.mode,n=this._player;switch(t.type){case"ad":return{ok:!1,message:"An ad is currently playing"};case"clip":return n.seek(e),{ok:!0}}}},{key:"seekBackward",value:function(e){var t=this.seek(this._player.currentTime-e);return this._seekBackwardObservable.dispatch(e),t}},{key:"seekForward",value:function(e){var t=Math.max(0,this.clipDuration-1),n=Math.min(t,this._player.currentTime+e),r=this.seek(n);return this._seekForwardObservable.dispatch(e),r}},{key:"setMuted",value:function(e){this._adPlayer.muted=e,this._player.muted=e}},{key:"setVolume",value:function(e){this._adPlayer.volume=e,this._player.volume=e}},{key:"togglePlayback",value:function(){this.isPlaying?this.pause():this.play()}},{key:"onAdMediaStateChange",get:function(){return this._adMediaStateChangeObservable.observe}},{key:"onBufferingChange",get:function(){return this._bufferingChangeObservable.observe}},{key:"onClipChange",get:function(){return this._clipChangeObservable.observe}},{key:"onClipEnd",get:function(){return this._clipEndObservable.observe}},{key:"onClipTimeUpdate",get:function(){return this._clipTimeUpdateObservable.observe}},{key:"onError",get:function(){return this._errorObservable.observe}},{key:"onModeChange",get:function(){return this._modeChangeObservable.observe}},{key:"onPause",get:function(){return this._pauseObservable.observe}},{key:"onPlay",get:function(){return this._playObservable.observe}},{key:"onPlayerStateChange",get:function(){return this._playerStateChangeObservable.observe}},{key:"onSeekBackward",get:function(){return this._seekBackwardObservable.observe}},{key:"onSeekForward",get:function(){return this._seekForwardObservable.observe}},{key:"_changeClip",value:function(e){this._currentClip=e,"mounted"===this._mountState.type&&this._dispatchSetClip(),this._clipChangeObservable.dispatch()}},{key:"_onClipEnded",value:function(){this._clipEndObservable.dispatch()}},{key:"_dispatchSetClip",value:function(){var e,t,n,r=this._currentClip,i=((n=null===(e=r.Program.AdConfig)||void 0===e?void 0:e.ConfigTriton)&&n.OnDemandUrl&&n.StationId&&(n.OnDemandUrl,n.StationId),function(e){return e&&e.VastUrl?{vastUrl:e.VastUrl}:null}(null===(t=r.Program.AdConfig)||void 0===t?void 0:t.ConfigVast)),a=this._getVideoPlayerDimensions(),o=function(e){var t=e.clip,n=e.getTritonAdProviderVastUrl,r=e.vastAdProviderVastUrl,i=[],a=0;if(t.HasPreRollVideoAd&&r&&i.push({id:a++,adProviderType:"Vast",type:"firstPlay",offsetSeconds:0,vastAdUrl:r}),t.AdMarkers&&t.AdMarkers.length>0&&n){var o,s=M(t.AdMarkers);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(0!==l.MaxNumberOfAds)for(var c=(0,A.e)(l.Offset),u=(0,A.F)(c),d=z(l.AdMarkerType,u,t.DurationSeconds),p=0;p<l.MaxNumberOfAds;p++)i.push({id:a++,adProviderType:"Triton",type:d,offsetSeconds:u,vastAdUrl:n(l.AdMarkerType)})}}catch(f){s.e(f)}finally{s.f()}}return i}({clip:r,getTritonAdProviderVastUrl:null,vastAdProviderVastUrl:P({adConfiguration:i,clip:r,embedData:this._vastAdProviderEmbedData,videoPlayerDimensions:a})});this._dispatch({type:"setClip",ads:o})}},{key:"_dispatch",value:function(e){var t=this,n=function(e,t){switch(t.type){case"adComplete":return B(e);case"adDataLoadFailed":if(t.sessionId!==e.sessionId)return e;switch(e.adCache.set(t.adId,{type:"error"}),e.mode.type){case"ad":var n=U(U({},e),{},{unshownAds:e.unshownAds.filter((function(e){return e.id!==t.adId})),mode:U(U({},e.mode),{},{remainingAds:e.mode.remainingAds.filter((function(e){return e.id!==t.adId}))})});return e.mode.ad.id!==t.adId?n:B(n);case"clip":return U(U({},e),{},{unshownAds:e.unshownAds.filter((function(e){return e.id!==t.adId}))})}break;case"adDataLoaded":if(t.sessionId!==e.sessionId)return e;var i={type:"loaded",adData:t.ad};switch(e.adCache.set(t.adId,i),e.mode.type){case"ad":return e.mode.ad.id===t.adId?[U(U({},e),{},{mode:U(U({},e.mode),{},{adCacheState:i})}),[{type:"adChange",ad:e.mode.ad,adData:i.adData}]]:e;case"clip":return e}break;case"adRejected":switch(e.mode.type){case"ad":return U(U({},e),{},{unshownAds:L([e.mode.ad].concat((0,O.Z)(e.mode.remainingAds),(0,O.Z)(e.unshownAds))),mode:{type:"clip"}});case"clip":return e}break;case"clipEnded":switch(e.mode.type){case"ad":throw Error("clipEnded in ad mode");case"clip":var a=T(e.unshownAds,(function(e){return"end"===e.type})),o=(0,r.Z)(a,2),s=o[0],l=o[1];if(0===s.length)return[e,[{type:"onClipEnded"}]];var c=s[0],u=s.slice(1),d=e.adCache.get(c.id);return[U(U({},e),{},{unshownAds:l,mode:{type:"ad",ad:c,adCacheState:null!==d&&void 0!==d?d:{type:"loading"},remainingAds:u,adTrigger:"ended"}}),void 0===d?[{type:"loadAd",ad:c}]:[]]}break;case"clipTimeUpdate":switch(e.mode.type){case"ad":return e;case"clip":var p=R(e,t.time);if(!t.isPlaying)return[e,p];var f=t.time-.25,h=f+1,y=T(e.unshownAds,(function(e){return j(e,f,h)})),v=(0,r.Z)(y,2),m=v[0],g=v[1];if(0===m.length)return[e,p];var b=m[0],w=m.slice(1),S=e.adCache.get(b.id);return void 0===S?p.push({type:"loadAd",ad:b}):"loaded"===S.type&&p.push({type:"adChange",ad:b,adData:S.adData}),[U(U({},e),{},{unshownAds:g,mode:{type:"ad",ad:b,adCacheState:null!==S&&void 0!==S?S:{type:"loading"},remainingAds:w,adTrigger:"playback"}}),[{type:"playerPause"}].concat((0,O.Z)(p))]}break;case"play":switch(e.mode.type){case"ad":return[e,[{type:"adPlay"}]];case"clip":var k=t.fromTime-.25,_=t.fromTime+2,C=T(e.unshownAds,(function(e){return"firstPlay"===e.type||j(e,k,_)})),Z=(0,r.Z)(C,2),P=Z[0],x=Z[1];if(0===P.length)return[e,[{type:"playerPlay"}]];var E=P[0],A=P.slice(1),M=e.adCache.get(E.id);return[U(U({},e),{},{unshownAds:x,mode:{type:"ad",ad:E,adCacheState:null!==M&&void 0!==M?M:{type:"loading"},remainingAds:A,adTrigger:t.trigger}}),void 0===M?[{type:"loadAd",ad:E}]:"loaded"===M.type?[{type:"adChange",ad:E,adData:M.adData}]:[]]}break;case"preload":return[e,R(e,t.fromTime)];case"setClip":return{adCache:new Map,allAds:t.ads,unshownAds:t.ads,mode:{type:"clip"},sessionId:e.sessionId+1}}}(this._state,e),i=Array.isArray(n)?n:[n,[]],a=(0,r.Z)(i,2),o=a[0],s=a[1];this._state=o,this._modeChangeObservable.dispatch();var l,c=H(s);try{var u=function(){var e=l.value;switch(e.type){case"adChange":t._adPlayer.adChange({adData:e.adData,adProviderType:e.ad.adProviderType,clip:t.clip});break;case"adPlay":t._adPlayer.play();break;case"onClipEnded":t._onClipEnded();break;case"loadAd":var n=o.sessionId,r=t._getVideoPlayerDimensions();(function(e){return F.apply(this,arguments)})(e.ad.vastAdUrl).then((function(i){var a=(0,d.R)(i,r);a?t._dispatch({type:"adDataLoaded",adId:e.ad.id,ad:a,sessionId:n}):t._dispatch({type:"adDataLoadFailed",adId:e.ad.id,sessionId:n})})).catch((function(r){t._dispatch({type:"adDataLoadFailed",adId:e.ad.id,sessionId:n})}));break;case"playerAutoplay":t._player.autoplay();break;case"playerPause":t._player.pause();break;case"playerPlay":t._player.play()}};for(c.s();!(l=c.n()).done;)u()}catch(p){c.e(p)}finally{c.f()}}},{key:"_getVideoPlayerDimensions",value:function(){var e=this._adPlayer;if(!e.videoElement)throw Error("attempting to get video player dimensions without video element");return{width:e.videoElement.clientWidth,height:e.videoElement.clientHeight}}}]),e}();function F(){return(F=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){u.client.get(t,{withCredentials:!0},(function(t,r){t?e(t.ads):n(r)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return W.apply(this,arguments)}function W(){return(W=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=(new Date).getTime(),r=!0;console.debug("elementInDOM: waiting for ad player element...");!function i(){if(t.parentElement)console.debug("elementInDOM: ad player element in DOM, resolving"),e();else{var a=(new Date).getTime()-n;console.log("elementInDOM: calling requestAnimationFrame at "+a+"ms");try{window.requestAnimationFrame((function(){if(r){var e=(new Date).getTime()-n;console.debug("elementInDOM: requestAnimationFrame resolved at "+e+"ms"),e>4e3&&(r=!1)}i()}))}catch(o){console.error("elementInDOM: requestAnimationFrame exception",o)}}}()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6453:function(e,t,n){n.d(t,{I:function(){return s},n:function(){return o}});var r=n(7294),i=n(5944),a=r.createContext(null);function o(){var e=r.useContext(a);if(null===e)throw Error("No PlayerContext provider");return e}function s(e){var t=e.player,n=e.children;return(0,i.tZ)(a.Provider,{value:t,children:n})}},9241:function(e,t,n){function r(e,t){return 0===e.indexOf(t)}function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=e.length-1;n>=0;n--){var r=s(e[n],t);if(r)return r}return null}function s(e,t){if(null!==e.sequence)return null;var n,r=i(e.creatives);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(p(a)){var o,s=[],d=i(a.mediaFiles);try{for(d.s();!(o=d.n()).done;){var f=o.value,h=u(f.mimeType);null!==h&&s.push({type:h,data:f})}}catch(g){d.e(g)}finally{d.f()}if(0!==s.length){s.sort(l(t));var y=s[0],v=y.data,m="number"===typeof a.skipDelay&&a.skipDelay>0?a.skipDelay:null;switch(y.type){case"audio":return{type:"audio",ad:e,creative:a,mediaFile:v,companion:c(e.creatives),skipDelay:m};case"video":return{type:"video",ad:e,creative:a,mediaFile:v,companion:null,skipDelay:m}}}}}}catch(g){r.e(g)}finally{r.f()}return null}function l(e){return function(t,n){if("video"===t.type&&"video"===n.type){var r=f(e.height,t.data.height,n.data.height);return 0!==r?r:f(300,t.data.bitrate,n.data.bitrate)}return"video"===t.type?-1:"video"===n.type?1:0}}function c(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(d(a)){var o,s=i(a.variations);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.staticResource&&r(l.type,"image/"))return{ad:l,creative:a}}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){n.e(c)}finally{n.f()}return null}function u(e){var t=e.toLowerCase();return r(t,"video/mp4")?"video":r(t,"audio/mp3")||r(t,"audio/mpeg")?"audio":null}function d(e){return"companion"===e.type}function p(e){return"linear"===e.type}function f(e,t,n){return Math.abs(e-t)-Math.abs(e-n)}n.d(t,{R:function(){return o}})},6802:function(e,t,n){function r(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{c:function(){return o}});var a=new Set(["accessToken","debug","download","in_playlist","json","published","requestSource","sessionId","showRedirect","size","skipAds","style","t","token","track","ttag","type"].map((function(e){return e.toLowerCase()})));function o(e,t){var n=function(e){switch(e){case"Embed":return"Embed";case"OmnyFm":return"OmnyFm";case"Twitter":return"Twitter"}}(t.embedSource),i=function(e){var t=new URL(e),n=[];return t.searchParams.forEach((function(e,t){a.has(t.toLowerCase())||n.push({key:t,value:e})})),n}(e.url);return function(t){var a=new URL(t);a.searchParams.set("requestSource","Widget"),a.searchParams.set("utm_source",n),!a.searchParams.has("embeddedUrl")&&e.referrer&&a.searchParams.set("embeddedUrl",e.referrer);var o,s=r(i);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=l.key,u=l.value;a.searchParams.append(c,u)}}catch(d){s.e(d)}finally{s.f()}return a.toString()}}},2159:function(e,t,n){n.d(t,{y9:function(){return A},GT:function(){return T},pm:function(){return E},pg:function(){return x},ej:function(){return O}});var r=n(9499),i=n(6835),a=n(7294),o=n(3874),s=n(8125);function l(e,t){if(window.ga){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];ga.apply(void 0,["".concat(t,".").concat(e)].concat(r))}}function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d="customGA";function p(e,t){if(t.customGATrackingId)if(window.ga){ga("create",{trackingId:t.customGATrackingId,name:d,cookieFlags:"SameSite=None; Secure"}),f("set","anonymizeIp",!0),f("send","pageview");var n={played:!1,times:[[.25,"Played 25%"],[.5,"Played 50%"],[.75,"Played 75%"],[.99,"Played 100%"]]};e.onClipChange((function(){n={played:!1,times:[[.25,"Played 25%"],[.5,"Played 50%"],[.75,"Played 75%"],[.99,"Played 100%"]]}})),e.onClipTimeUpdate((function(){var t=function(e,t,n){var r={played:e.played,times:[]},a=[];e.played||(r.played=!0,a.push("Play"));var o,s=t/n,l=c(e.times);try{for(l.s();!(o=l.n()).done;){var u=(0,i.Z)(o.value,2),d=u[0],p=u[1];s>d?a.push(p):r.times.push([d,p])}}catch(f){l.e(f)}finally{l.f()}return[r,a]}(n,e.clipCurrentTime,e.clipDuration),r=(0,i.Z)(t,2),a=r[0],o=r[1];n=a;var s,l,u,d,p=c(o);try{for(p.s();!(s=p.n()).done;){var h=s.value;l="Omny Studio Audio",u=h,d=e.clip.Title,f("send","event",l,u,d,void 0)}}catch(y){p.e(y)}finally{p.f()}}))}else console.error("Custom Google Analytics: window.ga undefined, possibly Google Analytics script is blocked")}function f(e){if(window.ga){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.debug("Custom Google Analytics:",e,n),l.apply(void 0,[e,d].concat(n))}}var h=n(6802),y=n(2174),v=n(2165);function m(e){var t="mediaSession"in navigator?navigator.mediaSession:null;t&&e.onPlay((function(){!function(e,t){var n=[];t.clip.ImageUrl?n.push({src:(0,v.f0)(t.clip.ImageUrl,"thumbnail"),sizes:g(v.PC.thumbnail),type:"image/jpeg"},{src:(0,v.f0)(t.clip.ImageUrl,"small"),sizes:g(v.PC.small),type:"image/jpeg"},{src:(0,v.f0)(t.clip.ImageUrl,"medium"),sizes:g(v.PC.medium),type:"image/jpeg"},{src:(0,v.f0)(t.clip.ImageUrl,"large"),sizes:g(v.PC.large),type:"image/jpeg"}):n.push({src:v.QC,type:"image/svg"});e.metadata=new MediaMetadata({title:t.clip.Title,artist:t.program.Name,artwork:n}),e.setActionHandler("play",(function(){t.play()})),e.setActionHandler("pause",(function(){t.pause()})),e.setActionHandler("seekbackward",(function(){t.seekBackward(15)})),e.setActionHandler("seekforward",(function(){t.seekForward(15)}))}(t,e)}))}function g(e){var t=e.width,n=e.height;return"".concat(t,"x").concat(n)}var b=n(6023),w=n.n(b);function S(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).debug.apply(e,["Omny Embed Player.js receiver received:"].concat(n))}function k(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).debug.apply(e,["Omny Embed Player.js receiver sent:"].concat(n))}var _=n(7079),C=n(4932);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t){var n,r=a.useRef(null),l=null!==(n=r.current)&&void 0!==n?n:function(){var n,i,a=(0,s.M)(),l=(0,o.K5)("omnyApiBaseUrl"),c=(0,o.K5)("omnyFmTrafficBaseUrl"),u=(0,o.tQ)("embedDisableConsumptionAnalytics"),d=new _.M({accessToken:null!==(n=t.accessToken)&&void 0!==n?n:void 0,apiBaseUrl:l,autoMount:!1,consumptionSource:"Web",decorateClipAudioUrl:"browser"===a.type?(0,h.c)(a,t):void 0,organizationId:e.OrganizationId,onConsumptionError:function(e,t){return(0,C.H)(e,{extra:t})},trafficBaseUrl:c,disableConsumptionAnalytics:u}).createClipPlayerByData(e),p=new y.Y({embedConfig:t,player:d,initialClip:d.clip,firstClipStartTimeSeconds:null!==(i=t.firstClipStartTimeSeconds)&&void 0!==i?i:void 0,playlistId:null,referrer:"browser"===a.type?a.referrer:""});return r.current=p,p}(),c=a.useState((function(){return x(l)})),u=(0,i.Z)(c,2),d=u[0],p=u[1],f=a.useMemo((function(){return E(l)}),[l]),v=a.useMemo((function(){return P(P({},d),f)}),[d,f]);return a.useEffect((function(){l.mount(),A(l,p),T(l,t)}),[t,l]),v}function x(e){return{adMediaState:e.adMediaState,adVideoElement:e.adVideoElement,buffering:e.buffering,clipCurrentTime:e.clipCurrentTime,clipDuration:e.clipDuration,hasPlayed:!1,mode:e.mode,playState:e.playState}}function E(e){return{adClick:e.adClick.bind(e),adSkip:e.adSkip.bind(e),play:e.play.bind(e),seek:e.seek.bind(e),seekBackward:e.seekBackward.bind(e),seekForward:e.seekForward.bind(e),togglePlayback:e.togglePlayback.bind(e)}}function T(e,t){var n;p(e,t),m(e),function(e,t){var n=new(w().Receiver)([w().EVENTS.ENDED,w().EVENTS.PAUSE,w().EVENTS.PLAY,w().EVENTS.READY,w().EVENTS.TIMEUPDATE],[w().METHODS.GETCURRENTTIME,w().METHODS.GETDURATION,w().METHODS.GETMUTED,w().METHODS.GETPAUSED,w().METHODS.GETVOLUME,w().METHODS.MUTE,w().METHODS.PAUSE,w().METHODS.PLAY,w().METHODS.SETCURRENTTIME,w().METHODS.SETVOLUME,w().METHODS.UNMUTE],t);n.on(w().METHODS.GETCURRENTTIME,(function(t){var n=e.clipCurrentTime;S("Get current time:",n),t(n)})),n.on(w().METHODS.GETDURATION,(function(t){var n=e.clipDuration;S("Get duration:",n),t(n)})),n.on(w().METHODS.GETMUTED,(function(t){var n=e.muted;S("Get muted:",n),t(n)})),n.on(w().METHODS.GETPAUSED,(function(t){var n=!e.isPlaying;S("Get paused:",n),t(n)})),n.on(w().METHODS.GETVOLUME,(function(t){var n=100*e.volume;S("Get volume:",n),t(n)})),n.on(w().METHODS.MUTE,(function(){S("Mute"),e.setMuted(!0)})),n.on(w().METHODS.PAUSE,(function(){S("Pause"),e.pause()})),n.on(w().METHODS.PLAY,(function(){S("Play"),e.play()})),n.on(w().METHODS.SETCURRENTTIME,(function(t){S("Set current time:",t);var r=e.seek(t);r.ok||n.emit("error",{code:-1,msg:r.message})})),n.on(w().METHODS.SETVOLUME,(function(t){S("Set volume:",t),e.setVolume(t/100)})),n.on(w().METHODS.UNMUTE,(function(){S("Unmute"),e.setMuted(!1)})),e.onClipEnd((function(){k("Ended"),n.emit(w().EVENTS.ENDED)})),e.onClipTimeUpdate((function(){var t={seconds:e.clipCurrentTime,duration:e.clipDuration};k("Time update:",t),n.emit(w().EVENTS.TIMEUPDATE,t)})),e.onError((function(e){k("Error",e),n.emit(w().EVENTS.ERROR,{code:-1,msg:e.code+": "+e.message})})),e.onPause((function(){k("Pause"),n.emit(w().EVENTS.PAUSE)})),e.onPlay((function(){k("Play"),n.emit(w().EVENTS.PLAY)})),console.debug("Omny Embed Player.js receiver ready"),n.ready()}(e,{referrerOverride:null!==(n=t.referrerOverride)&&void 0!==n?n:void 0}),t.autoplay&&e.autoplay()}function A(e,t){e.onAdMediaStateChange((function(){t((function(t){return P(P({},t),{},{adMediaState:e.adMediaState})}))})),e.onBufferingChange((function(){t((function(t){return P(P({},t),{},{buffering:e.buffering})}))})),e.onModeChange((function(){t((function(t){return P(P({},t),{},{mode:e.mode})}))})),e.onPlayerStateChange((function(){t((function(t){return P(P({},t),{},{clipCurrentTime:e.clipCurrentTime,clipDuration:e.clipDuration,hasPlayed:"playing"===e.playState.type||t.hasPlayed,playState:e.playState})}))}))}},9e3:function(e,t,n){n.d(t,{P3:function(){return v},Wk:function(){return h}});var r=n(748),i=n(1531),a=n(3553),o=n(7247),s=n(2777),l=n(2262),c=n(9499),u=n(8820),d=n(4932);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,o.Z)(e);if(t){var i=(0,o.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var f=function(){function e(){(0,s.Z)(this,e),(0,c.Z)(this,"_actionObservable",(0,u._)()),(0,c.Z)(this,"_bufferingChangeObservable",(0,u._)())}return(0,l.Z)(e,[{key:"onAction",value:function(e){return this._actionObservable.observe(e)}},{key:"onBufferingChange",value:function(e){return this._bufferingChangeObservable.observe(e)}}]),e}(),h=function(e){(0,i.Z)(n,e);var t=p(n);function n(){var e;(0,s.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,r.Z)(e),"_buffering",!1),(0,c.Z)((0,r.Z)(e),"_currentTime",0),(0,c.Z)((0,r.Z)(e),"_muted",!1),(0,c.Z)((0,r.Z)(e),"_volume",1),e}return(0,l.Z)(n,[{key:"buffering",get:function(){return this._buffering}},{key:"currentTime",get:function(){return this._currentTime}},{key:"muted",get:function(){return this._muted},set:function(e){this._muted=e}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e}},{key:"bless",value:function(){throw Error("not implemented")}},{key:"pause",value:function(){throw Error("not implemented")}},{key:"play",value:function(){throw Error("not implemented")}},{key:"setCurrentTime",value:function(e){this._currentTime=e}},{key:"setSrc",value:function(e,t){throw Error("not implemented")}}]),n}(f),y={code:2,message:"Server could not be reached"},v=function(e){(0,i.Z)(n,e);var t=p(n);function n(e){var i;(0,s.Z)(this,n),i=t.call(this),(0,c.Z)((0,r.Z)(i),"_mediaElement",void 0),(0,c.Z)((0,r.Z)(i),"_buffering",!1),(0,c.Z)((0,r.Z)(i),"_lastMetadataDuration",null),(0,c.Z)((0,r.Z)(i),"_shouldBless",!0),i._mediaElement=e;for(var a=0,o=["canplay","loadstart","playing","suspend","waiting"];a<o.length;a++){var l=o[a];e.addEventListener(l,(function(){var t=e.readyState<e.HAVE_FUTURE_DATA;t!==i._buffering&&(i._buffering=t,i._bufferingChangeObservable.dispatch(t))}))}return e.addEventListener("durationchange",(function(){if(isNaN(e.duration))throw Error("media duration NaN in durationchange");i._actionObservable.dispatch({type:"durationChange",duration:e.duration})})),e.addEventListener("ended",(function(){if(null===i._lastMetadataDuration)return(0,d.H)("media ended fired without lastMetadataDuration",{extra:{mediaDuration:e.duration}}),void i._actionObservable.dispatch({type:"error",error:y});e.duration===i._lastMetadataDuration?i._actionObservable.dispatch({type:"ended"}):i._actionObservable.dispatch({type:"error",error:y})})),e.addEventListener("error",(function(){i._actionObservable.dispatch({type:"error",error:e.error})})),e.addEventListener("loadedmetadata",(function(){i._lastMetadataDuration=null,isNaN(e.duration)?console.error("media duration NaN in loadedmetadata"):e.duration!==1/0?(i._lastMetadataDuration=e.duration,i._actionObservable.dispatch({type:"loadedMetadata",duration:e.duration})):i._actionObservable.dispatch({type:"error",error:y})})),e.addEventListener("pause",(function(){i._actionObservable.dispatch({type:"pause"})})),e.addEventListener("play",(function(){i._actionObservable.dispatch({type:"play"})})),e.addEventListener("playing",(function(){i._actionObservable.dispatch({type:"playing"})})),e.addEventListener("seeked",(function(){i._actionObservable.dispatch({type:"seeked"})})),e.addEventListener("seeking",(function(){i._actionObservable.dispatch({type:"seeking",currentTime:e.currentTime})})),e.addEventListener("timeupdate",(function(){i._actionObservable.dispatch({type:"timeUpdate",currentTime:e.currentTime})})),i}return(0,l.Z)(n,[{key:"buffering",get:function(){return this._buffering}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e}},{key:"bless",value:function(){this._shouldBless&&(this._shouldBless=!1,this._mediaElement.load())}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"play",value:function(e){var t,n=this,r=this._mediaElement;this._shouldBless=!1,(null!==(t=r.play())&&void 0!==t?t:Promise.resolve()).catch((function(t){if(!(t instanceof DOMException))throw t;console.error("mediaElement.play() rejected with DOMException",t),n._actionObservable.dispatch({type:"playPromiseRejected",playPromiseId:e})}))}},{key:"setCurrentTime",value:function(e){this._mediaElement.currentTime=e}},{key:"setSrc",value:function(e,t){var n=this._mediaElement;n.src=e,n.title=t,this._lastMetadataDuration=null}}],[{key:"isSupported",value:function(){return"undefined"!==typeof document}}]),n}(f)},8820:function(e,t,n){function r(){var e=new Set;return{observe:function(t){return e.add(t),function(){e.delete(t)}},dispatch:function(t){for(var n=0,r=Array.from(e);n<r.length;n++){(0,r[n])(t)}},removeObservers:function(){e.clear()}}}n.d(t,{_:function(){return r}})},7079:function(e,t,n){n.d(t,{M:function(){return q}});var r=n(2777),i=n(2262),a=n(9499),o=n(6709),s=n(6845),l=n(9e3),c=n(7812),u=n(4450),d=n(748),p=n(1531),f=n(3553),h=n(7247),y=n(6835),v=n(29),m=n(7794),g=n.n(m),b=n(1265),w=n(8598),S=n(8534),k=function(){function e(t){(0,r.Z)(this,e),(0,a.Z)(this,"_options",void 0),(0,a.Z)(this,"_state",{completedSessions:[],currentSession:null}),this._options=t}return(0,i.Z)(e,[{key:"state",get:function(){return this._state}},{key:"pause",value:function(e){var t=this._state;if(t.currentSession){var n=t.currentSession.pendingStart;n?(this._log("pause",{time:e,pendingStart:n}),e.audioPosition<n.audioPosition?this._error("pause consumption event received with an audio position before the pending start audio position",{pausePosition:e.audioPosition,pendingStartPosition:n.audioPosition}):(t.currentSession.session.times.push({start:n,stop:e}),t.currentSession.pendingStart=null,this._options.onChange(t))):this._error("pause consumption event received without pending start")}else this._error("pause consumption event received without session")}},{key:"play",value:function(e){var t=this._state;t.currentSession?t.currentSession.pendingStart?this._error("play consumption event received after previous play event"):(this._log("play",{time:e}),t.currentSession.pendingStart=e,this._options.onChange(t)):this._error("play consumption event received without session")}},{key:"seek",value:function(e){var t=e.fromPosition,n=e.toPosition,r=e.eventTimestamp,i=this._state;if(i.currentSession){var a=i.currentSession.pendingStart;a&&(this._log("seek",{fromPosition:t,toPosition:n,pendingStart:a,eventTimestamp:r}),t<a.audioPosition?this._error("seek consumption event received with a from position before the pending start audio position",{pendingStartPosition:a.audioPosition,seekFromPosition:t}):(i.currentSession.session.times.push({start:a,stop:{audioPosition:t,eventTimestamp:r}}),i.currentSession.pendingStart={audioPosition:n,eventTimestamp:r},this._options.onChange(i)))}else this._error("seek consumption event received without session")}},{key:"setClip",value:function(e){var t,n=e.clip,r=e.sessionId,i=e.time,a=this._state,o=null===(t=a.currentSession)||void 0===t?void 0:t.pendingStart;this._log("setClip",{time:i,pendingStart:o}),a.currentSession&&(o&&(i.audioPosition===o.audioPosition||(i.audioPosition<o.audioPosition?this._error("setClip consumption event received with an audio position before the pending start audio position",{setClipPosition:i.audioPosition,pendingStartPosition:o.audioPosition}):a.currentSession.session.times.push({start:o,stop:i}))),a.currentSession.session.times.length>0&&(a.completedSessions.push({metadata:a.currentSession.session.metadata,times:a.currentSession.session.times}),this._options.onChange(a))),a.currentSession={session:{metadata:{id:r,clip:{Id:n.Id,OrganizationId:n.OrganizationId}},times:[]},pendingStart:null}}},{key:"_error",value:function(e,t){this._options.onError&&this._options.onError(e,t)}},{key:"_log",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).debug.apply(t,["Omny SDK consumption:",e].concat(r))}}]),e}();function _(e,t){if(!e.currentSession)return e.completedSessions;var n=e.currentSession.session.times,r=e.currentSession.pendingStart;r&&t&&r.audioPosition<t.audioPosition&&(n=n.slice()).push({start:r,stop:t});var i=e.completedSessions;return n.length>0&&(i=i.slice()).push({metadata:e.currentSession.session.metadata,times:n}),i}function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){if(0===t.length)return null;var n,r=[],i=C(t);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=1,l=C(o.times);try{for(l.s();!(a=l.n()).done;){var c=a.value;r.push(O(o,"Start",c.start,s++),O(o,"Stop",c.stop,s++))}}catch(u){l.e(u)}finally{l.f()}}}catch(u){i.e(u)}finally{i.f()}return{Source:e,Events:r,Completed:!0}}function O(e,t,n,r){return{OrganizationId:e.metadata.clip.OrganizationId,ClipId:e.metadata.clip.Id,SessionId:e.metadata.id,Type:t,Position:n.audioPosition,SeqNumber:r,Timestamp:n.eventTimestamp}}function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(){function e(t){(0,r.Z)(this,e),(0,a.Z)(this,"playerId",void 0),(0,a.Z)(this,"source",void 0),(0,a.Z)(this,"heartbeat",void 0),(0,a.Z)(this,"storage",void 0),(0,a.Z)(this,"fetch",void 0),this.playerId=t.playerId,this.source=t.source,this.heartbeat=t.heartbeat,this.storage=t.storage,this.fetch=t.fetch}return(0,i.Z)(e,[{key:"dispatch",value:function(){var e=(0,v.Z)(g().mark((function e(t){var n,r,i,a,o,s,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.storage.getStoredIds(),r=x(n),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=31;break}if((a=i.value)!==this.playerId){e.next=8;break}return e.abrupt("continue",29);case 8:o=this.storage.getStoredData(a),s=this.actionForData(o,t),e.t0=s.type,e.next="delete"===e.t0?13:"send"===e.t0?15:"ignore"===e.t0?28:29;break;case 13:return this.storage.deleteStoredData(a),e.abrupt("break",29);case 15:return this.storage.deleteStoredData(a),e.next=18,this.fetch(s.request);case 18:l=e.sent,e.t1=l.type,e.next="permanentError"===e.t1?22:"success"===e.t1?23:"temporaryError"===e.t1?24:27;break;case 22:case 23:return e.abrupt("break",27);case 24:return this.storage.storeState(a,s.data.stateUnsafe),this.storage.storeHeartbeat(a,s.data.heartbeatUnsafe),e.abrupt("break",27);case 27:case 28:return e.abrupt("break",29);case 29:e.next=4;break;case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(2),r.e(e.t2);case 36:return e.prev=36,r.f(),e.finish(36);case 39:case"end":return e.stop()}}),e,this,[[2,33,36,39]])})));return function(t){return e.apply(this,arguments)}}()},{key:"actionForData",value:function(e,t){if(!e)return{type:"ignore"};var n;try{n=e.heartbeatUnsafe.eventTimestamp}catch(o){n=null}if("number"!==typeof n||n<0)return{type:"delete"};var r,i=t-n;if(i>this.heartbeat.deleteIfOlderThanSeconds)return{type:"delete"};try{r=_(e.stateUnsafe,e.heartbeatUnsafe)}catch(o){return{type:"delete"}}var a=P(this.source,r);return null===a?{type:"delete"}:i>this.heartbeat.sendIfOlderThanSeconds?{type:"send",request:a,data:e}:{type:"ignore"}}}]),e}();function A(){var e=window.crypto||window.msCrypto;return e?"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(t){return(t^e.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var M=function(){function e(t){var n=this,i=t.sendConsumptionEventsFunctions,o=t.source,s=t.getAudioCurrentTime,l=t.getEventTimestamp,c=t.onError;(0,r.Z)(this,e),(0,a.Z)(this,"events",void 0),(0,a.Z)(this,"_heartbeatIntervalId",void 0),(0,a.Z)(this,"_dispatchTimeoutId",-1),(0,a.Z)(this,"_pageGoingAwayCallback",void 0);var u,d=i.beacon,p=i.fetch,f=A(),h=function(e){var t=e.storageSource,n=e.stateKeyPrefix,r=e.heartbeatKeyPrefix;return{storeState:function(e,r){t.setItem(n+e,JSON.stringify(r))},storeHeartbeat:function(e,n){t.setItem(r+e,JSON.stringify(n))},getStoredIds:function(){for(var e=new Set,i=function(t,n){if(n&&n.startsWith(t)){var r=n.slice(t.length);e.add(r)}},a=0;a<t.length;a++){var o=t.key(a);i(n,o),i(r,o)}return Array.from(e)},getStoredData:function(e){var i,a;try{var o;i=JSON.parse(null!==(o=t.getItem(n+e))&&void 0!==o?o:"")}catch(l){i=null}try{var s;a=JSON.parse(null!==(s=t.getItem(r+e))&&void 0!==s?s:"")}catch(l){a=null}return null===i&&null===a?null:{stateUnsafe:i,heartbeatUnsafe:a}},deleteStoredData:function(e){t.removeItem(n+e),t.removeItem(r+e)}}}({storageSource:{get length(){try{return window.localStorage.length}catch(e){return 0}},key:function(e){try{return window.localStorage.key(e)}catch(t){return null}},getItem:function(e){try{return window.localStorage.getItem(e)}catch(t){return null}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(t){return}},setItem:function(e,t){try{window.localStorage.setItem(e,t)}catch(n){return}}},stateKeyPrefix:"OMNY_CONSUMPTION_STATE_",heartbeatKeyPrefix:"OMNY_CONSUMPTION_HEARTBEAT_"}),y=new T({playerId:f,source:o,heartbeat:{sendIfOlderThanSeconds:(0,S.Z)(5),deleteIfOlderThanSeconds:(u=20,(0,w.Z)(24*u))},storage:h,fetch:p});this.events=new k({onChange:function(e){h.storeState(f,e),void 0===n._heartbeatIntervalId&&(n._heartbeatIntervalId=window.setInterval((function(){h.storeHeartbeat(f,{audioPosition:s(),eventTimestamp:l()})}),1e3))},onError:c});!function e(){n._dispatchTimeoutId=window.setTimeout((0,v.Z)(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.dispatch(l());case 2:e();case 3:case"end":return t.stop()}}),t)}))),5e3)}();var m=!1;this._pageGoingAwayCallback=function(){if(!0!==m){m=!0;var e=_(n.events.state,{audioPosition:s(),eventTimestamp:l()}),t=P(o,e);null!==t&&d(t)}},window.addEventListener("pagehide",this._pageGoingAwayCallback),window.addEventListener("beforeunload",this._pageGoingAwayCallback)}return(0,i.Z)(e,[{key:"destroy",value:function(){window.clearInterval(this._heartbeatIntervalId),window.clearInterval(this._dispatchTimeoutId),window.removeEventListener("pagehide",this._pageGoingAwayCallback),window.removeEventListener("beforeunload",this._pageGoingAwayCallback)}}]),e}(),I=n(8820),D=n(1218);function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function j(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=function(){function e(t){var n=this,i=t.audio,o=t.autoMount,s=void 0===o||o,l=t.consumptionSource,c=t.decorateClipAudioUrl,u=t.getCurrentClip,d=t.onConsumptionError,p=t.trafficBaseUrl,f=t.disableConsumptionAnalytics,h=void 0!==f&&f;(0,r.Z)(this,e),(0,a.Z)(this,"_audio",void 0),(0,a.Z)(this,"_consumption",null),(0,a.Z)(this,"_consumptionSource",void 0),(0,a.Z)(this,"_decorateClipAudioUrl",void 0),(0,a.Z)(this,"_disableConsumptionAnalytics",void 0),(0,a.Z)(this,"_dispatchCounter",0),(0,a.Z)(this,"_getCurrentClip",void 0),(0,a.Z)(this,"_hasMounted",!1),(0,a.Z)(this,"_nextPlayPromiseId",0),(0,a.Z)(this,"_onConsumptionError",void 0),(0,a.Z)(this,"_playerState",{type:"paused",pauseState:{type:"noSrc"},pendingCurrentTime:0}),(0,a.Z)(this,"_trafficBaseUrl",void 0),(0,a.Z)(this,"_bufferingChangeObservable",(0,I._)()),(0,a.Z)(this,"_clipChangeObservable",(0,I._)()),(0,a.Z)(this,"_clipEndObservable",(0,I._)()),(0,a.Z)(this,"_errorObservable",(0,I._)()),(0,a.Z)(this,"_pauseObservable",(0,I._)()),(0,a.Z)(this,"_playObservable",(0,I._)()),(0,a.Z)(this,"_playerStateChangeObservable",(0,I._)()),(0,a.Z)(this,"_timeUpdateObservable",(0,I._)()),this._audio=i,this._audio.onAction((function(e){n._dispatchAudio(e)})),this._audio.onBufferingChange((function(){n._bufferingChangeObservable.dispatch()})),this._consumptionSource=null!==l&&void 0!==l?l:"CustomWeb",this._decorateClipAudioUrl=null!==c&&void 0!==c?c:function(e){return e},this._trafficBaseUrl=null!==p&&void 0!==p?p:"https://traffic.omny.fm",this._getCurrentClip=u,this._onConsumptionError=d,this._disableConsumptionAnalytics=h,s&&this.mount()}return(0,i.Z)(e,[{key:"mount",value:function(){var e=this;if(!this._hasMounted){this._hasMounted=!0;var t=this._disableConsumptionAnalytics?{beacon:function(){},fetch:function(){var e=(0,v.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"success"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}:function(e,t){var n=e+"/api/consumption/events";function r(){return(r=(0,v.Z)(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==navigator.sendBeacon){e.next=2;break}return e.abrupt("return");case 2:r=JSON.stringify(t),navigator.sendBeacon(n,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return i=(0,v.Z)(g().mark((function e(r){var i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.stringify(r),e.abrupt("return",fetch(n,{method:"POST",body:i,headers:{"Content-Type":"application/json"}}).then(function(){var e=(0,v.Z)(g().mark((function e(r){var i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.status>=400&&r.status<500)){e.next=2;break}return e.abrupt("return",{type:"permanentError"});case 2:if(200===r.status){e.next=4;break}return e.abrupt("return",{type:"temporaryError"});case 4:return e.next=6,r.json();case 6:if((i=e.sent)&&"boolean"===typeof i.Enabled){e.next=10;break}return null===t||void 0===t||t("Invalid body received from "+n),e.abrupt("return",{type:"temporaryError"});case 10:return e.abrupt("return",{type:"success"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){return{type:"temporaryError"}})));case 2:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return{beacon:function(e){return r.apply(this,arguments)},fetch:function(e){return i.apply(this,arguments)}}}(this._trafficBaseUrl,this._onConsumptionError);this._consumption=new M({sendConsumptionEventsFunctions:t,source:this._consumptionSource,getAudioCurrentTime:function(){return e.currentTime},getEventTimestamp:H,onError:this._onConsumptionError}),this._onClipChange()}}},{key:"buffering",get:function(){return this._audio.buffering}},{key:"currentTime",get:function(){var e=this._playerState,t=(0,D.FW)(e),n=(0,D.Xn)(e);return t?Math.min(n,t.duration):n}},{key:"duration",get:function(){var e=this._playerState,t=(0,D.FW)(e),n=this._getCurrentClip().DurationSeconds;return t?t.duration:n}},{key:"muted",get:function(){return this._audio.muted},set:function(e){this._audio.muted=e}},{key:"playState",get:function(){var e=this._playerState;switch(e.type){case"error":return{type:"error",error:e.error};case"paused":return{type:"paused"};case"playing":return{type:"playing"}}}},{key:"volume",get:function(){return this._audio.volume},set:function(e){this._audio.volume=e}},{key:"autoplay",value:function(){this._dispatchPlayer({type:"autoplay",playPromiseId:this._nextPlayPromiseId++})}},{key:"bless",value:function(){this._audio.bless()}},{key:"destroy",value:function(){var e;this._bufferingChangeObservable.removeObservers(),this._clipChangeObservable.removeObservers(),this._clipEndObservable.removeObservers(),this._errorObservable.removeObservers(),this._pauseObservable.removeObservers(),this._playObservable.removeObservers(),this._playerStateChangeObservable.removeObservers(),this._timeUpdateObservable.removeObservers(),null===(e=this._consumption)||void 0===e||e.destroy()}},{key:"pause",value:function(){this._dispatchPlayer({type:"pause"})}},{key:"play",value:function(){this._dispatchPlayer({type:"play",playPromiseId:this._nextPlayPromiseId++})}},{key:"seek",value:function(e){this._dispatchPlayer({type:"seek",toTime:e})}},{key:"onBufferingChange",get:function(){return this._bufferingChangeObservable.observe}},{key:"onClipEnd",get:function(){return this._clipEndObservable.observe}},{key:"onError",get:function(){return this._errorObservable.observe}},{key:"onPause",get:function(){return this._pauseObservable.observe}},{key:"onPlay",get:function(){return this._playObservable.observe}},{key:"onPlayerStateChange",get:function(){return this._playerStateChangeObservable.observe}},{key:"onTimeUpdate",get:function(){return this._timeUpdateObservable.observe}},{key:"_dispatch",value:function(e,t,n){var r,i=this._playerState;++this._dispatchCounter;X("playerState ".concat(e," action and existing state"),{action:t,existingState:i});try{r=n(i,t)}catch(c){if(c instanceof D.V)return b.Tb(c),[];throw c}var a=Array.isArray(r)?r:[r,[]],o=(0,y.Z)(a,2),s=o[0],l=o[1];return X("playerState new state",{newState:s}),this._playerState=s,i!==s&&this._playerStateChangeObservable.dispatch(),(0,D.Xn)(i)!==(0,D.Xn)(s)&&this._timeUpdateObservable.dispatch(),l}},{key:"_dispatchAudio",value:function(e){var t,n=j(this._dispatch("audio",e,D.X0));try{for(n.s();!(t=n.n()).done;){var r=t.value;switch(r.type){case"audioClearSrc":this._audio.setSrc("","");break;case"audioPause":this._audio.pause();break;case"audioPlay":this._audio.play(r.playPromiseId);break;case"audioSeek":this._audio.setCurrentTime(r.timeSeconds);break;case"audioSetSrc":this._audio.setSrc(r.audioData.src,r.audioData.title);break;case"onEnded":this._clipEndObservable.dispatch();break;case"onError":this._errorObservable.dispatch(r.error);break;case"onPause":var i;null===(i=this._consumption)||void 0===i||i.events.pause(this._getCurrentConsumptionTime(r.currentTime)),this._pauseObservable.dispatch();break;case"onPlay":var a;null===(a=this._consumption)||void 0===a||a.events.play(this._getCurrentConsumptionTime(r.currentTime)),this._playObservable.dispatch();break;case"onSeek":var o;null===(o=this._consumption)||void 0===o||o.events.seek({fromPosition:r.fromTime,toPosition:r.toTime,eventTimestamp:H()})}}}catch(s){n.e(s)}finally{n.f()}}},{key:"_dispatchPlayer",value:function(e){var t,n=j(this._dispatch("player",e,D.WC));try{for(n.s();!(t=n.n()).done;){var r=t.value;switch(r.type){case"audioPause":this._audio.pause();break;case"audioPlay":this._audio.play(r.playPromiseId);break;case"audioSeek":this._audio.setCurrentTime(r.toTime);break;case"audioSetSrc":this._audio.setSrc(r.audioData.src,r.audioData.title)}}}catch(i){n.e(i)}finally{n.f()}}},{key:"_onClipChange",value:function(){var e,t=this._getCurrentClip();if(!t.AudioUrl)throw Error("attempting to play clip without AudioUrl");var n=this._decorateClipAudioUrl(t.AudioUrl,t);null===(e=this._consumption)||void 0===e||e.events.setClip({clip:t,sessionId:A(),time:this._getCurrentConsumptionTime(this.currentTime)}),this._dispatchPlayer({type:"setData",audioData:{src:n,title:t.Title}})}},{key:"_getCurrentConsumptionTime",value:function(e){return{audioPosition:e,eventTimestamp:H()}}}]),e}(),L=function(e){(0,p.Z)(n,e);var t=U(n);function n(e){var i,o=e.audio,s=e.autoMount,l=e.clip,c=e.consumptionSource,u=e.decorateClipAudioUrl,p=e.onConsumptionError,f=e.trafficBaseUrl,h=e.disableConsumptionAnalytics;return(0,r.Z)(this,n),i=t.call(this,{audio:o,autoMount:s,consumptionSource:c,decorateClipAudioUrl:u,getCurrentClip:function(){return i._clip},onConsumptionError:p,trafficBaseUrl:f,disableConsumptionAnalytics:h}),(0,a.Z)((0,d.Z)(i),"_clip",void 0),i._clip=l,i}return(0,i.Z)(n,[{key:"clip",get:function(){return this._clip}}]),n}(R),z=function(e){(0,p.Z)(n,e);var t=U(n);function n(e){var i,o,s=e.accessToken,l=e.audio,c=e.autoMount,u=e.consumptionSource,p=e.decorateClipAudioUrl,f=e.trafficBaseUrl,h=e.getPlaylistClips,y=e.getPlaylistPage,v=e.initialClipId,m=e.onConsumptionError,g=e.playlist,b=e.playlistPage,w=e.disableConsumptionAnalytics;(0,r.Z)(this,n),o=t.call(this,{audio:l,autoMount:c,consumptionSource:u,decorateClipAudioUrl:p,trafficBaseUrl:f,getCurrentClip:function(){return o._currentClip},onConsumptionError:m,disableConsumptionAnalytics:w}),(0,a.Z)((0,d.Z)(o),"_accessToken",void 0),(0,a.Z)((0,d.Z)(o),"_clips",void 0),(0,a.Z)((0,d.Z)(o),"_clipsLoadErrorObservable",(0,I._)()),(0,a.Z)((0,d.Z)(o),"_clipsLoadObservable",(0,I._)()),(0,a.Z)((0,d.Z)(o),"_clipsLoadStartObservable",(0,I._)()),(0,a.Z)((0,d.Z)(o),"_currentClip",void 0),(0,a.Z)((0,d.Z)(o),"_getPlaylistClips",void 0),(0,a.Z)((0,d.Z)(o),"_getPlaylistPage",void 0),(0,a.Z)((0,d.Z)(o),"_loadingClips",!1),(0,a.Z)((0,d.Z)(o),"_nextPagination",void 0),(0,a.Z)((0,d.Z)(o),"_playlist",void 0),(0,a.Z)((0,d.Z)(o),"_previousPagination",void 0);var S=b.Clips;if(0===S.length)throw Error("No initial clips");return o._accessToken=s,o._clips=S.slice(),o._currentClip=null!==(i=S.find((function(e){return e.Id===v})))&&void 0!==i?i:S[0],o._getPlaylistClips=h,o._getPlaylistPage=y,o._nextPagination={disabled:!b.NextClipsAvailable,error:!1,loading:!1},o._playlist=g,o._previousPagination={disabled:!b.PreviousClipsAvailable,error:!1,loading:!1},o}return(0,i.Z)(n,[{key:"loadPreviousClips",value:function(){var e=(0,v.Z)(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this._clips[0].Id,this._loadMoreClips({targetClipId:n,pageSize:t,pagination:this._previousPagination,apiDirection:"BeforeExclusive",hasClipsAvailable:function(e){return e.PreviousClipsAvailable},mergeClips:function(e,t){return[].concat((0,c.Z)(t),(0,c.Z)(e))}});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadNextClips",value:function(){var e=(0,v.Z)(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this._clips[this._clips.length-1].Id,this._loadMoreClips({targetClipId:n,pageSize:t,pagination:this._nextPagination,apiDirection:"AfterExclusive",hasClipsAvailable:function(e){return e.NextClipsAvailable},mergeClips:function(e,t){return[].concat((0,c.Z)(e),(0,c.Z)(t))}});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clips",get:function(){return this._clips}},{key:"currentClip",get:function(){return this._currentClip}},{key:"currentClipIndex",set:function(e){if(!(e<0||e>=this._clips.length)){var t=this._clips[e];t!==this._currentClip&&(this._currentClip=t,this._onClipChange(),this._clipChangeObservable.dispatch(this.currentClip))}}},{key:"nextClipsDisabled",get:function(){return this._nextPagination.disabled}},{key:"nextClipsError",get:function(){return this._nextPagination.error}},{key:"nextClipsLoading",get:function(){return this._nextPagination.loading}},{key:"playlist",get:function(){return this._playlist}},{key:"previousClipsDisabled",get:function(){return this._previousPagination.disabled}},{key:"previousClipsError",get:function(){return this._previousPagination.error}},{key:"previousClipsLoading",get:function(){return this._previousPagination.loading}},{key:"onClipChange",get:function(){return this._clipChangeObservable.observe}},{key:"onClipsLoadStart",get:function(){return this._clipsLoadStartObservable.observe}},{key:"onClipsLoadError",get:function(){return this._clipsLoadErrorObservable.observe}},{key:"onClipsLoad",get:function(){return this._clipsLoadObservable.observe}},{key:"destroy",value:function(){this._clipChangeObservable.removeObservers(),this._clipsLoadErrorObservable.removeObservers(),this._clipsLoadObservable.removeObservers(),this._clipsLoadStartObservable.removeObservers(),(0,u.Z)((0,h.Z)(n.prototype),"destroy",this).call(this)}},{key:"_loadMoreClips",value:function(){var e=(0,v.Z)(g().mark((function e(t){var n,r,i,a,o,s,l,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.targetClipId,r=t.pageSize,i=t.pagination,a=t.apiDirection,o=t.hasClipsAvailable,s=t.mergeClips,!this._loadingClips){e.next=3;break}return e.abrupt("return");case 3:if(this._loadingClips=!0,!i.disabled){e.next=6;break}return e.abrupt("return");case 6:return i.error=!1,i.loading=!0,this._clipsLoadStartObservable.dispatch(),e.next=11,this._getPlaylistClips({accessToken:this._accessToken,playlistId:this._playlist.Id,orgId:this._playlist.OrganizationId,clipId:n,direction:a,pageSize:r,includeProgramDetail:!0});case 11:if(l=e.sent,i.loading=!1,this._loadingClips=!1,l.success){e.next=18;break}return i.error=!0,this._clipsLoadErrorObservable.dispatch(),e.abrupt("return");case 18:c=this._getPlaylistPage(l.payload),o(c)||(i.disabled=!0),this._clips=s(this._clips,c.Clips),this._clipsLoadObservable.dispatch();case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(R);function H(){return Math.round((new Date).getTime()/1e3)}function X(e,t){b.n_({category:D.YY,message:e,data:t})}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(){function e(t){(0,r.Z)(this,e),(0,a.Z)(this,"_options",void 0),(0,a.Z)(this,"_omnyConsumerApi",void 0),this._options=t,this._omnyConsumerApi=(0,o.l)()}return(0,i.Z)(e,[{key:"createClipPlayerByData",value:function(e){return new L({audio:this._createAudio(),autoMount:this._options.autoMount,clip:e,consumptionSource:this._options.consumptionSource,decorateClipAudioUrl:this._options.decorateClipAudioUrl,onConsumptionError:this._options.onConsumptionError,trafficBaseUrl:this._options.trafficBaseUrl,disableConsumptionAnalytics:this._options.disableConsumptionAnalytics})}},{key:"createPlaylistPlayerByData",value:function(e,t,n){return new z({accessToken:this._options.accessToken,audio:this._createAudio(),autoMount:this._options.autoMount,consumptionSource:this._options.consumptionSource,decorateClipAudioUrl:this._options.decorateClipAudioUrl,getPlaylistClips:this._omnyConsumerApi.getPlaylistClipsV2,getPlaylistPage:function(e){return F(F({},e),{},{Clips:e.Clips.map((function(e){return(0,s.u)(e,"clip",["AudioUrl","Program","PublishedUrl","PublishedUtc","Title"])}))})},initialClipId:n,onConsumptionError:this._options.onConsumptionError,playlist:e,playlistPage:t,trafficBaseUrl:this._options.trafficBaseUrl,disableConsumptionAnalytics:this._options.disableConsumptionAnalytics})}},{key:"_createAudio",value:function(){return l.P3.isSupported()?new l.P3(document.createElement("audio")):new l.Wk}}]),e}()}}]);